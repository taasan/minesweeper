(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,n){e.exports={Theme:"solarized_Theme__36Ttp"}},,,,,,function(e,t,n){e.exports={Theme:"theme_Theme__1KsyP"}},function(e,t,n){e.exports={Theme:"dark_Theme__n6cmj"}},function(e,t,n){e.exports={Theme:"light_Theme__3XUtO"}},function(e,t,n){e.exports={Theme:"auto_Theme__2DBna"}},,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var r,a=n(1),c=n.n(a),o=n(20),u=n.n(o),i=(n(33),n(3)),s=(n(34),n(2)),l=(n(35),n(5)),d=[[1e3,"\u216f","M"],[900,"\u216d\u216f","CM"],[500,"\u216e","D"],[400,"\u216d\u216e","CD"],[100,"\u216d","C"],[90,"\u2169\u216d","XC"],[50,"\u216c","L"],[40,"\u2169\u216c","XL"],[12,"\u216b","XII"],[11,"\u216a","XI"],[10,"\u2169","X"],[9,"\u2168","IX"],[8,"\u2167","VIII"],[7,"\u2166","VII"],[6,"\u2165","VI"],[5,"\u2164","V"],[4,"\u2163","IV"],[3,"\u2162","III"],[2,"\u2161","II"],[1,"\u2160","I"]],f=function(e,t){if(0===e||e>4e3)return e.toString();var n=[e<0?"\u2212":""];return e=Math.abs(e),d.forEach((function(r){for(var a=Object(i.a)(r,3),c=a[0],o=a[1],u=a[2];e>=c&&e>0&&!(12===c&&e>12||11===c&&e>11);)n.push(t?o:u),e-=c})),n.join("")};!function(e){e[e.ascii=48]="ascii",e[e.DOUBLE_CIRCLED=9460]="DOUBLE_CIRCLED",e[e.ROMAN_NUMERAL=8543]="ROMAN_NUMERAL",e[e.SMALL_ROMAN_NUMERAL=8559]="SMALL_ROMAN_NUMERAL",e[e.HANGZHOU_NUMERAL=12320]="HANGZHOU_NUMERAL",e[e.COUNTING_ROD_UNIT=119647]="COUNTING_ROD_UNIT",e[e.ARABIC_INDIC=1632]="ARABIC_INDIC",e[e.EXTENDED_ARABIC_INDIC=1776]="EXTENDED_ARABIC_INDIC",e[e.NKO=1984]="NKO",e[e.DEVANAGARI=2406]="DEVANAGARI",e[e.BENGALI=2534]="BENGALI",e[e.GURMUKHI=2662]="GURMUKHI",e[e.GUJARATI=2790]="GUJARATI",e[e.ORIYA=2918]="ORIYA",e[e.TAMIL=3046]="TAMIL",e[e.TELUGU=3174]="TELUGU",e[e.KANNADA=3302]="KANNADA",e[e.MALAYALAM=3430]="MALAYALAM",e[e.SINHALA_LITH=3558]="SINHALA_LITH",e[e.SINHALA_ARCHAIC=70112]="SINHALA_ARCHAIC",e[e.THAI=3664]="THAI",e[e.LAO=3792]="LAO",e[e.TIBETAN=3872]="TIBETAN",e[e.MYANMAR=4160]="MYANMAR",e[e.MYANMAR_SHAN=4240]="MYANMAR_SHAN",e[e.ETHIOPIC=4968]="ETHIOPIC",e[e.KHMER=6112]="KHMER",e[e.LEPCHA=7232]="LEPCHA",e[e.VAI=42528]="VAI",e[e.MYANMAR_TAI_LAING=43504]="MYANMAR_TAI_LAING",e[e.COPTIC_EPACT=66272]="COPTIC_EPACT",e[e.OSMANYA=66720]="OSMANYA"}(r||(r={}));var m=Object.freeze({ROMAN_NUMERAL:"roman",SMALL_ROMAN_NUMERAL:"romanlow",ARABIC_INDIC:"arab",EXTENDED_ARABIC_INDIC:"arabext",NKO:"nkoo",DEVANAGARI:"deva",BENGALI:"beng",GURMUKHI:"guru",GUJARATI:"gujr",ORIYA:"orya",TAMIL:"tamldec",TELUGU:"telu",KANNADA:"knda",MALAYALAM:"mlym",SINHALA_LITH:"sinh",THAI:"thai",LAO:"laoo",TIBETAN:"tibt",MYANMAR:"mymr",MYANMAR_SHAN:"mymrshan",ETHIOPIC:"ethi",KHMER:"khmr",MONGOLIAN:"mong",LIMBU:"limb",NEW_TAI_LUE:"talu",TAI_THAM_HORA:"lana",TAI_THAM_THAM:"lanatham",BALINESE:"bail",SUNDANESE:"sund",LEPCHA:"lepc",OL_CHIKI:"olck",VAI:"vaii",SAURASHTRA:"saur",KAYAH_LI:"kali",JAVANESE:"java",MYANMAR_TAI_LAING:"mymrtlng",CHAM:"cham",MEETEI_MAYEK:"mtei",OSMANYA:"osma",HANIFI_ROHINGYA:"rohg",BRAHMI:"brah",SORA_SOMPENG:"sora",CHAKMA:"cakm",SHARADA:"shrd",KHUDAWADI:"sind",NEWA:"newa",TIRHUTA:"tirh",MODI:"modi",TAKRI:"takr",AHOM:"ahom",WARANG_CITI:"wara",BHAIKSUKI:"bhks",MASARAM_GONDI:"gonm",GUNJALA_GONDI:"gong",MRO:"mroo",PAHAWH_HMONG:"hmng",NYIAKENG_PUACHUE_HMONG:"hmnp",WANCHO:"wcho",ADLAM:"adlm"}),O=function(e){return e===r.ROMAN_NUMERAL||e===r.SMALL_ROMAN_NUMERAL},j=function(e,t,n){return Number.isInteger(t)&&O(e)?f(t,!1):t.toLocaleString(function(e){var t=m[r[e]];return null!=t?"en-u-nu-".concat(t):void 0}(e),n)},b=function(e,t,n){var a=new Date(0,0,0,0,0,t),c=a.getSeconds(),o=a.getMinutes(),u=a.getHours(),s=[c];return(o>0||u>0)&&(s.unshift(o),u>0&&s.unshift(u)),O(e)&&(e=r.ascii),s.map((function(t){return[t,j(e,t,n)]})).map((function(t){var r=Object(i.a)(t,2),a=r[0],c=r[1];return a<10?j(e,0,n)+c:c})).join(":")},h=r;var E=function(){return 0};function v(e){throw new Error("Unexpected value: "+e)}var A,D=Math.sqrt(3)/2,p=function(e,t){if("object"===typeof t)return t;var n=t%e;return{col:n,row:(t-n)/e}},N=function(e,t){return"number"===typeof t?t:t.col+e*t.row},g=n(4),I=n.n(g);!function(e){e[e.SQUARE=0]="SQUARE",e[e.HEX=1]="HEX"}(A||(A={}));var x;!function(e){e[e.LIMITED=0]="LIMITED",e[e.TOROIDAL=1]="TOROIDAL"}(x||(x={}));var y,w=function(e,t){return e<<16|t},C=I.a.memoize((function(e,t){var n=p(e,t);return(0===(1&n.row)?[[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[0,1]]:[[1,1],[1,0],[0,-1],[-1,0],[-1,1],[0,1]]).map((function(e){var t=Object(i.a)(e,2),r=t[0],a=t[1];return{row:r+n.row,col:a+n.col}})).flat(1)}),w),L=I.a.memoize((function(e,t){var n=p(e,t);return[-1,0,1].map((function(e){return[-1,0,1].map((function(t){return{row:t+n.row,col:e+n.col}}))})).flat(1)}),w),S=n(8),R=function e(t,n){Object(S.a)(this,e),this.cause=void 0,this.message=void 0,this[l.c]=!0,this.message=t,this.cause=Object.freeze(n)};!function(e){e[e.NOT_INITIALIZED=0]="NOT_INITIALIZED",e[e.INITIALIZED=1]="INITIALIZED",e[e.PLAYING=2]="PLAYING",e[e.PAUSED=3]="PAUSED",e[e.COMPLETED=4]="COMPLETED",e[e.GAME_OVER=5]="GAME_OVER",e[e.ERROR=6]="ERROR",e[e.DEMO=7]="DEMO"}(y||(y={}));var T,M=function(e,t){var n=e.level;return e.cells[N(n.cols,t)]};function F(e){return Number.isInteger(Number(e))&&e>=0&&e<=8}!function(e){e[e.NEW=0]="NEW",e[e.OPEN=1]="OPEN",e[e.FLAGGED=2]="FLAGGED",e[e.UNCERTAIN=3]="UNCERTAIN",e[e.EXPLODED=4]="EXPLODED"}(T||(T={}));var P,U=function(e,t,n){if(n<0||n>15)throw new RangeError("Invalid value: ".concat(n));return t&~(15<<e)|n<<e},G=function(e,t){return(t&15<<e)>>e},_=function(e,t){if(null==T[t])throw new RangeError("Unknown state ".concat(t));return U(8,e,t)},k=function(e){return G(8,e)},B=function(e,t){return U(4,e,t)},H=function(e){var t=G(4,e);return 0!==t?t:void 0},W=function(e,t){if(!F(t))throw new RangeError("Invalid threat count: ".concat(t));return U(0,e,t)},Y=function(e){var t=G(0,e);if(!F(t))throw new RangeError("Invalid threat count: ".concat(t));return t},X=function(e){var t,n;return W(B(_(0,e.state),null!==(t=e.mine)&&void 0!==t?t:0),null!==(n=e.threatCount)&&void 0!==n?n:0)},K=n(6),V=n(14),z=n(13),Z=n(7),J=n(21),Q=n.n(J);!function(e){e[e.DARK=0]="DARK",e[e.LIGHT=1]="LIGHT",e[e.AUTO=2]="AUTO"}(P||(P={}));var q=function(e){return Object.freeze(Object(s.a)(Object(s.a)({},e),{},{classNames:Object.freeze(e.styles.map((function(e){return e.Theme})))}))},$=q({name:"Simple",styles:[Q.a]}),ee=n(15),te=n.n(ee),ne=n(22),re=n.n(ne),ae=n(23),ce=n.n(ae),oe=n(24),ue=n.n(oe),ie=q({name:"Solarized dark",styles:[te.a,re.a],mode:P.DARK}),se=q({name:"Solarized light",styles:[te.a,ce.a],mode:P.LIGHT}),le=q({name:"Solarized (auto)",styles:[te.a,ue.a],mode:P.AUTO}),de=le,fe=function(){return[$,le,ie,se]},me="Minesweeper.settings";function Oe(e){if(!["string","number","boolean","object"].includes(e))throw new TypeError("Unable to save value of type '".concat(e))}function je(e,t){var n="".concat(me,".").concat(t);try{Oe(e);var r=localStorage.getItem(n);switch(e){case"number":var a=Number(r);return isNaN(a)?void 0:a;case"string":return r;case"boolean":case"object":var c=null!=r?JSON.parse(r):void 0;return"boolean"===e?!0===c:"object"===typeof c?c:void 0;default:console.warn("Unhandled type ".concat(e))}}catch(o){try{localStorage.removeItem(n)}catch(u){}console.warn({err:o,type:e,key:t})}}function be(e,t,n){try{Oe(e),localStorage.setItem("".concat(me,".").concat(t),"object"===e?JSON.stringify(n):n)}catch(r){console.warn(r)}}var he=function(e,t){var n=typeof t,r=je(n,e),a=c.a.useState(null!==r&&void 0!==r?r:t),o=Object(i.a)(a,2),u=o[0],s=o[1];return[u,c.a.useCallback((function(t){s(t),be(n,e,t)}),[e,n])]},Ee=n(0),ve=Object(a.createContext)({theme:de,setTheme:I.a.noop}),Ae=new Map(fe().map((function(e){return[e.name,e]}))),De=function(e){var t,n=he("theme",de.name),r=Object(i.a)(n,2),a=r[0],c=r[1],o=Ae.get(a);return(null==(t=o)||"string"!==typeof t.name||null!=t.mode&&null==P[t.mode]||!Array.isArray(t.styles)||null==t.styles.find((function(e){return"string"!==typeof e}))||null!=t.symbols&&"string"!==typeof t.symbols.flag)&&(null!=o&&console.warn("Invalid theme",{name:a,theme:o}),o=de),Object(Ee.jsx)(ve.Provider,{value:{theme:o,setTheme:function(e){return c(e.name)}},children:e.children})},pe=Object(a.createContext)({fitWindow:false,setFitWindow:I.a.noop}),Ne=function(e){var t=he("fitWindow",false),n=Object(i.a)(t,2),r=n[0],a=n[1];return Object(Ee.jsx)(pe.Provider,{value:{fitWindow:r,setFitWindow:a},children:e.children})},ge=h.ascii,Ie=Object(a.createContext)({numeralSystem:ge,setNumeralSystem:I.a.noop}),xe=function(e){var t,n=he("numeralSystem",ge),a=Object(i.a)(n,2),c=a[0],o=a[1];return("number"!==typeof(t=c)||null==r[t])&&(c=ge),Object(Ee.jsx)(Ie.Provider,{value:{numeralSystem:c,setNumeralSystem:o},children:e.children})},ye=Object(a.createContext)({rotate:false,setRotate:I.a.noop}),we=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(n){return t.reduce((function(e,t){return Object(Ee.jsx)(t,{children:e})}),Object(Ee.jsx)(e,Object(s.a)({},n)))}}}(Ne,De,xe,(function(e){var t=he("rotate",false),n=Object(i.a)(t,2),r=n[0],a=n[1];return Object(Ee.jsx)(ye.Provider,{value:{rotate:r,setRotate:a},children:e.children})})),Ce=function(){var e=c.a.useContext(ve),t=e.theme,n=e.setTheme,r=c.a.useContext(pe),a=r.fitWindow,o=r.setFitWindow,u=c.a.useContext(Ie),i=u.numeralSystem,s=u.setNumeralSystem,l=c.a.useContext(ye),d=l.rotate,f=l.setRotate;return{state:{fitWindow:a,setFitWindow:o,theme:t,setTheme:n,numeralSystem:i,setNumeralSystem:s,rotate:d,setRotate:f},setState:function(e){var t=e.theme,r=e.fitWindow,a=e.numeralSystem,c=e.rotate;n(t),o(r),s(a),f(c)}}},Le=we,Se=function(e){return Object.freeze(Object(s.a)({cols:0,rows:0,mines:0,type:A.SQUARE,topology:x.LIMITED},e))},Re=function(e){var t;return Object(s.a)((t={},Object(Z.a)(t,T.NEW,0),Object(Z.a)(t,T.OPEN,0),Object(Z.a)(t,T.FLAGGED,0),Object(Z.a)(t,T.UNCERTAIN,0),Object(Z.a)(t,T.EXPLODED,0),t),e)},Te=function(e){return Object(l.a)(e,(function(e){return Object(s.a)({cells:new Uint16Array,state:y.NOT_INITIALIZED,level:Se(),cellStates:Re(),error:null,version:0,onGameOver:I.a.noop},e)}))},Me=function(e){var t=e.cols,n=e.rows;return new Uint16Array(n*t)};function Fe(e,t,n){for(var r=e.level,a=e.onGameOver,c=Me(r),o=r.cols,u=r.rows,i=r.mines,s=(new Set).add(N(o,t)),l=0,d=o*u;s.size<=i;){if(l++>10*i)throw new Error("Infinite loop?");var f=Ue(d);s.has(f)||(s.add(f),c[f]=B(c[f],Ue(14)+1))}return Te({level:Se(r),cells:c.map((function(e,t){var n=function(e,t){if(void 0!==H(e.cells[t]))return;var n=0;if(ke(e.level,t,(function(t){var r=e.cells[t];void 0!==H(r)&&n++})),n<0||n>8)throw new Error("Unexpected threat number: ".concat(n));return n}({level:r,cells:c},t);return void 0!==n?W(e,n):e})),cellStates:Re(Object(Z.a)({},T.NEW,i)),state:n,onGameOver:a})}function Pe(e,t){var n=Object(i.a)(t,2),r=n[0],a=n[1],c=M(e,r),o=Y(c),u=Y(a);if(e.state===y.PLAYING&&o!==u)throw new Error("Expected ".concat(u,", got ").concat(o));e.cells[N(e.level.cols,r)]=a}function Ue(e){return Math.floor(Math.random()*Math.floor(e))}var Ge,_e=function(e,t){var n=e.rows,r=e.cols,a=e.type,c=e.topology,o=function(e){switch(e){case A.SQUARE:return L;case A.HEX:return C}v(e)}(a)(r,N(r,t)),u=function(e,t){return-1===e?t-1:e===t?0:e};switch(c){case x.TOROIDAL:o=o.map((function(e){var t=e.row,a=e.col;return{row:u(t,n),col:u(a,r)}}));break;case x.LIMITED:o=o.filter((function(e){var t=e.row,a=e.col;return!(a>=r||a<0||t>=n||t<0)}));break;default:v(c)}return o.map((function(e){var t=e.row;return e.col+r*t})).filter((function(e){return e!==t}))};function ke(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];0!==r.length&&_e(e,t).forEach((function(e){return r.forEach((function(t){return t(e)}))}))}!function(e){e[e.POKE=0]="POKE",e[e.FLAG=1]="FLAG",e[e.PAUSE=2]="PAUSE",e[e.UNPAUSE=3]="UNPAUSE"}(Ge||(Ge={}));function Be(e,t){var n=Object(i.a)(t,2),r=n[0],a=n[1];return a.state===y.NOT_INITIALIZED?a=Be(e,[r,Fe(a,r,y.PLAYING)]):e===Ge.PAUSE||e===Ge.UNPAUSE?[y.PAUSED,y.PLAYING].includes(a.state)?Object(l.a)(a,(function(t){t.state=e===Ge.PAUSE?y.PAUSED:y.PLAYING})):a:Object(l.a)(a,(function(t){switch(e){case Ge.POKE:He(r,t);break;case Ge.FLAG:!function(e,t){var n=M(t,e);switch(t.state){case y.PLAYING:break;case y.INITIALIZED:case y.PAUSED:case y.GAME_OVER:case y.COMPLETED:case y.NOT_INITIALIZED:case y.ERROR:case y.DEMO:return;default:v(t.state)}var r=k(n),a=r;switch(r){case T.FLAGGED:a=T.UNCERTAIN;break;case T.UNCERTAIN:a=T.NEW;break;case T.NEW:a=T.FLAGGED;break;case T.EXPLODED:case T.OPEN:return;default:v(r)}Pe(t,[e,_(n,a)])}(r,t);break;default:v(e)}var n,c=(n=t.cells,Re(I.a.countBy(n,(function(e){return k(e)}))));if(t.cellStates=c,t.cellStates[T.EXPLODED]>a.cellStates[T.EXPLODED]){t.state=y.GAME_OVER;try{a.onGameOver()}catch(u){console.warn("Unhandled exception in onGameOver handler",u)}}else if(k(M(t,r))===T.OPEN){var o=t.level.mines+c[T.OPEN]===t.level.cols*t.level.rows;t.state=o?y.COMPLETED:t.state}}))}function He(e,t){switch(t.state){case y.PLAYING:break;case y.INITIALIZED:case y.PAUSED:case y.GAME_OVER:case y.COMPLETED:case y.NOT_INITIALIZED:case y.ERROR:case y.DEMO:return;default:v(t.state)}var n=M(t,e),r=k(n);if(r!==T.FLAGGED)if(r!==T.OPEN){var a=r,c=H(n);switch(r){case T.NEW:case T.UNCERTAIN:a=void 0!==c?T.EXPLODED:T.OPEN;break;case T.EXPLODED:return;default:v(r)}if(Pe(t,[e,_(n,a)]),0===Y(n)&&a!==T.EXPLODED){var o=function(e){var t=k(e);return t===T.NEW||t===T.UNCERTAIN};!function e(n){var r=Object(i.a)(n,2),a=r[0],c=r[1];if(void 0!==H(c))throw new Error("Expected cell not to be mined");o(c)&&(Pe(t,[a,_(c,T.OPEN)]),0===Y(c)&&_e(t.level,a).forEach((function(n){var r=t.cells[n];o(r)&&e([n,r])})))}([e,n])}}else!function(e,t){var n=M(t,e),r=t.level,a=0;ke(r,e,(function(e){var n=M(t,e),r=k(n);r!==T.FLAGGED&&r!==T.EXPLODED||a++})),a<Y(n)||ke(r,e,(function(e){var n=M(t,e),r=k(n);r!==T.NEW&&r!==T.UNCERTAIN||He(e,t)}))}(e,t)}var We=function(e){var t=e.rows,n=e.cols;return Math.floor(t*n*.5)},Ye=function(e){var t=e.rows,n=e.cols;return Math.ceil(t*n*.1)},Xe=function(e){var t,n=e.rows,r=e.cols,a=e.mines,c=e.topology,o=e.type,u=[];if(n<3?u.push({field:"rows",value:n,msg:"Too small"}):n>30&&u.push({field:"rows",value:n,msg:"Too large"}),r<3?u.push({field:"cols",value:r,msg:"Too small"}):n>30&&u.push({field:"cols",value:r,msg:"Too large"}),a<Ye({rows:n,cols:r})?u.push({field:"mines",value:a,msg:"Too small"}):a>We({rows:n,cols:r})&&u.push({field:"mines",value:a,msg:"Too large"}),("number"!==typeof(t=c)||null==x[t])&&u.push({field:"topology",value:c,msg:"Invalid"}),function(e){return"number"===typeof e&&null!=A[e]}(o)||u.push({field:"type",value:o,msg:"Invalid"}),u.length>0)throw new Ke("Invalid level",u)},Ke=function(e){Object(V.a)(n,e);var t=Object(z.a)(n);function n(e,r){var a;return Object(S.a)(this,n),(a=t.call(this,e)).errors=void 0,a.errors=Object.freeze(r.map((function(e){return Object.freeze(e)}))),a}return n}(R);function Ve(e,t){try{Xe(e),be("object","level",e);var n=Me(e).map(E),r=function(e,t){var n=Object(i.a)(t,2),r=n[0],a=n[1];try{switch(a.state){case y.PAUSED:return function(e,t){if(e!==Ge.UNPAUSE)throw new Error("Illegal command: expected ".concat(Ge[Ge.UNPAUSE]));if(t.state!==y.PAUSED)throw new Error("Invalid state: expected ".concat(y.PAUSED));return Object(l.a)(t,(function(e){e.state=y.PLAYING}))}(e,a)}return a.state===y.ERROR?a:Object(l.a)(Be(e,[r,a]),(function(e){e.version++}))}catch(c){return console.error(c),Object(l.a)(a,(function(t){t.error=c instanceof R?c:new R("Command ".concat(Ge[e]," failed"),c),t.state=y.ERROR}))}};return{board:Te({level:Se(e),cells:n,onGameOver:t}),nextState:function(e,t,n){var a=Object(i.a)(t,2),c=a[0],o=a[1];return o.state!==y.NOT_INITIALIZED&&n!==o.version?Object(l.a)(o,(function(e){e.error=new R("Version mismatch"),e.state=y.ERROR})):r(e,[c,o])}}}catch(a){if(a instanceof Ke)return{board:Te({level:Se(e),cells:new Uint16Array,onGameOver:t,state:y.ERROR,error:a}),nextState:function(e,t){var n=Object(i.a)(t,2);n[0];return n[1]}};throw a}}var ze=function(){var e=[].concat(Object(K.a)(Object(K.a)(new Array(8)).map((function(e,t){return{state:T.OPEN,threatCount:t+1}}))),[{state:T.NEW},{state:T.OPEN,threatCount:0},{state:T.FLAGGED,mine:1},{state:T.FLAGGED,threatCount:0},{state:T.UNCERTAIN,mine:1},{state:T.UNCERTAIN,threatCount:0},{state:T.EXPLODED,mine:2},{state:T.OPEN,mine:3}]).map(X);return{board:Te({cells:new Uint16Array(e),level:Se({cols:4,rows:Math.ceil(e.length/4),type:A.HEX}),state:y.DEMO}),nextState:function(){throw new Error}}};Object(l.b)();var Ze,Je=n(25),Qe=function(e){Object(V.a)(n,e);var t=Object(z.a)(n);function n(){var e;Object(S.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={error:null},e}return Object(Je.a)(n,[{key:"componentDidCatch",value:function(e,t){}},{key:"render",value:function(){return null!=this.state.error?Object(Ee.jsxs)("div",{children:[Object(Ee.jsx)("h1",{children:"Something went wrong :("}),Object(Ee.jsx)("p",{children:this.state.error})]}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e.message}}}]),n}(a.Component),qe=(n(38),"\ud83e\udd7a"),$e="\ud83d\udca9",et="\ud83c\uddf3\ud83c\uddf4",tt="\ud83e\udd70",nt="\ud83d\udc80",rt=function(){var e=new Date;return 17===e.getDate()&&4===e.getMonth()?et:"\u2623\ufe0f"},at=(Ze={"\ud83e\udd12":null,"\ud83d\ude37":null,"\ud83e\udd2e":null,"\ud83e\udd22":null,"\ud83e\udd21":null,"\ud83e\udddf":null,"\ud83e\udd25":null,"\ud83e\udd15":null,"\ud83e\udd27":null,"\ud83d\udc7b":null,"\ud83e\udd75":null,"\ud83e\udd76":null,"\ud83d\udc79":null,"\ud83d\udc7a":null,"\ud83e\udda0":null,"\0":null},Object(Z.a)(Ze,et,null),Object(Z.a)(Ze,"\u2623\ufe0f",null),Object(Z.a)(Ze,"\u2753",null),Object(Z.a)(Ze,qe,null),Object(Z.a)(Ze,$e,null),Object(Z.a)(Ze,tt,null),Object(Z.a)(Ze,nt,null),Ze),ct=Object.freeze(I.a.takeWhile(Object.keys(at),(function(e){return"\0"!==e})));function ot(e){return null!=e&&"object"===typeof e&&("string"===typeof(e=e).data&&e.data.startsWith("data:image/svg+xml;base64,"))}function ut(e){var t;return"object"===typeof e&&"string"===typeof(null===(t=e=e)||void 0===t?void 0:t.href)}var it=n.p+"static/media/symbols.e8532fbb.svg";function st(e){return e===et?e:{key:e,href:"".concat(it,"#").concat(e),external:!0}}function lt(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:st;if(t===y.PAUSED)return"\xa0";var a=k(e),c=H(e),o=Y(e);if(a===T.EXPLODED)return r(nt);var u=void 0!==c,i=t===y.COMPLETED,s=t===y.GAME_OVER,l=t===y.DEMO,d=s||i||l,f=a===T.FLAGGED;if(!d&&f)return r(rt());var m=d&&u&&f&&(i||s);if(i&&u&&a!==T.FLAGGED)return r(qe);if(m)return r(tt);if((s||a===T.OPEN)&&void 0!==c)return r(ct[c]);if(t===y.COMPLETED)return lt(_(e,T.OPEN),y.PLAYING,n,r);switch(a){case T.FLAGGED:return r(!l&&!s||u?rt():$e);case T.UNCERTAIN:return r("\u2753");case T.OPEN:return F(o)?dt(n,o):"\xa0";default:return"\xa0"}}function dt(e,t){return String.fromCodePoint(e+t)}n(39);var ft,mt=function(e){return e.stopPropagation(),e.preventDefault(),!1},Ot=n(17),jt=n.n(Ot),bt=n(26),ht=function(e,t){return Object(a.useCallback)((function(n){if(null!=e){var r=Object(bt.a)(jt.a.mark((function t(){return jt.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e(n));case 1:case"end":return t.stop()}}),t)})))();if(null!=t){var a=t.onfinally,c=t.onfulfilled,o=t.onrejected;r.then(c&&function(){return c(n)}).catch(o&&function(e){return o(n,e)}).finally(a&&function(){return a(n)})}}}),[t,e])},Et=33,vt=function(e){var t=e.cell,n=e.dispatch,r=e.coordinate,a=e.content,c=e.gridType,o=e.done,u=k(t),i=H(t),s=Y(t),l=ht(n,{onrejected:function(e,t){return console.error("rejected",{action:e,err:t})}}),d=/^(?:[0-9\xB2\xB3\xB9\xBC-\xBE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D58-\u0D5E\u0D66-\u0D78\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]|\uD800[\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDEE1-\uDEFB\uDF20-\uDF23\uDF41\uDF4A\uDFD1-\uDFD5]|\uD801[\uDCA0-\uDCA9]|\uD802[\uDC58-\uDC5F\uDC79-\uDC7F\uDCA7-\uDCAF\uDCFB-\uDCFF\uDD16-\uDD1B\uDDBC\uDDBD\uDDC0-\uDDCF\uDDD2-\uDDFF\uDE40-\uDE48\uDE7D\uDE7E\uDE9D-\uDE9F\uDEEB-\uDEEF\uDF58-\uDF5F\uDF78-\uDF7F\uDFA9-\uDFAF]|\uD803[\uDCFA-\uDCFF\uDD30-\uDD39\uDE60-\uDE7E\uDF1D-\uDF26\uDF51-\uDF54\uDFC5-\uDFCB]|\uD804[\uDC52-\uDC6F\uDCF0-\uDCF9\uDD36-\uDD3F\uDDD0-\uDDD9\uDDE1-\uDDF4\uDEF0-\uDEF9]|\uD805[\uDC50-\uDC59\uDCD0-\uDCD9\uDE50-\uDE59\uDEC0-\uDEC9\uDF30-\uDF3B]|\uD806[\uDCE0-\uDCF2\uDD50-\uDD59]|\uD807[\uDC50-\uDC6C\uDD50-\uDD59\uDDA0-\uDDA9\uDFC0-\uDFD4]|\uD809[\uDC00-\uDC6E]|\uD81A[\uDE60-\uDE69\uDF50-\uDF59\uDF5B-\uDF61]|\uD81B[\uDE80-\uDE96]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDFCE-\uDFFF]|\uD838[\uDD40-\uDD49\uDEF0-\uDEF9]|\uD83A[\uDCC7-\uDCCF\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9])$/.test(a.toString())?void 0:"img";return Object(Ee.jsx)("svg",{viewBox:"0 0 ".concat(Et," ").concat(Et),className:"c",onMouseDown:!0===o?void 0:function(e){null==l||u!==T.OPEN&&0!==e.button||l({type:"POKE",coordinate:r})},onContextMenu:!0===o?void 0:function(e){if(mt(e),null!=l)switch(u){case T.NEW:case T.FLAGGED:case T.UNCERTAIN:return window.navigator.vibrate(100),l({type:"FLAG",coordinate:r})}},"data-s":u,"data-t":0!==s&&void 0===i?s:void 0,"data-m":void 0!==i||void 0,children:function(){var e=Object(Ee.jsx)("use",{href:"#".concat(A[c]),className:"cb"}),t=Object(Ee.jsx)("use",{href:"#".concat(A[c]),className:"cc"});switch(u){case T.NEW:return o?Object(Ee.jsxs)(Ee.Fragment,{children:[t,Object(Ee.jsx)(At,{role:d,content:a})]}):t;case T.FLAGGED:case T.UNCERTAIN:return Object(Ee.jsxs)(Ee.Fragment,{children:[!0===o&&void 0!==i?e:t,Object(Ee.jsx)(At,{role:"img",content:a})]});case T.OPEN:if(void 0===i&&0===s)return e;case T.EXPLODED:return Object(Ee.jsxs)(Ee.Fragment,{children:[e,Object(Ee.jsx)(At,{role:d,content:a})]})}v(u)}()})},At=c.a.memo((function(e){var t,n=Object(s.a)(Object(s.a)({},e),{},{content:void 0}),r=e.content;if(null!=r&&(null!=(t=r)&&"string"!==typeof t&&!F(t)&&(ot(t)||ut(t)))){var a=22,c=5.5;return ut(r)&&!r.external?Object(Ee.jsx)("image",{className:"ct",x:c,y:c,width:a,height:a,href:r.href}):ot(r)?Object(Ee.jsx)("use",{href:"#".concat(r.key),className:"ct",x:c,y:c,width:a,height:a}):Object(Ee.jsx)("use",{href:"".concat(r.href),className:"ct",x:c,y:c,width:a,height:a})}return Object(Ee.jsx)("text",Object(s.a)(Object(s.a)({className:"ct",x:16.5,y:16.5,dominantBaseline:"central",textAnchor:"middle",fill:"white",fontSize:16.5},n),{},{children:r}))})),Dt=Object(a.memo)(vt),pt=a.forwardRef((function(e,t){var n=e.dispatch,r=e.board,c=e.style,o=e.numeralSystem,u=e.rotated,i=r.state;switch(r.state){case y.ERROR:var s,l=null!=r.error?r.error.message:"Unknown error";r.error instanceof Ke&&(s=Object(Ee.jsx)("pre",{style:{textAlign:"initial"},children:JSON.stringify(r.error.errors,void 0,2)}));var d=null!=r.error&&null!=r.error.cause&&r.error.cause.message?Object(Ee.jsx)("p",{children:r.error.cause.message}):void 0;return null!=r.error&&console.error(r.error),Object(Ee.jsxs)("main",{className:"Error",children:[Object(Ee.jsxs)("header",{children:[Object(Ee.jsx)("h1",{children:"Error"}),Object(Ee.jsx)("p",{children:"Something went wrong"})]}),Object(Ee.jsx)("p",{children:l}),s,Object(Ee.jsxs)("section",{children:[Object(Ee.jsx)("h2",{children:"Cause"}),null!==d&&void 0!==d?d:"unknown"]})]});case y.NOT_INITIALIZED:case y.COMPLETED:case y.GAME_OVER:case y.INITIALIZED:case y.PLAYING:case y.PAUSED:case y.DEMO:break;default:return v(r.state)}var f=r.level,m=f.cols,O=f.rows,j=f.topology,b=u&&O!==m,h=i===y.GAME_OVER||i===y.COMPLETED||i===y.DEMO||i===y.ERROR,E=h||i===y.PAUSED?"none":"revert",g=function(){var e=r.level.type;switch(e){case A.SQUARE:return{xOffset:0,yFactor:1,width:Et*m,height:Et*O};case A.HEX:return{xOffset:16.5,yFactor:D,width:Et*m+16.5,height:((O-1)*D+1)*Et}}v(e)}(),I=g.xOffset,w=g.yFactor,C=g.width,L=g.height,S=j===x.LIMITED?{x:0,y:0,width:C,height:L}:{x:-33,y:-41.25,width:C+66,height:L+82.5},R=b?{x:S.y,y:S.x,width:S.height,height:S.width}:S,M=["SvgBoard"];b&&M.push("SvgBoard__rotated");var F="".concat(R.x," ").concat(R.y," ").concat(R.width," ").concat(R.height),P=b?"translate(".concat(L," 0) rotate(90 0 0)"):void 0;return Object(Ee.jsx)("svg",{ref:t,style:c,preserveAspectRatio:"xMidYMid meet",className:M.join(" "),pointerEvents:E,viewBox:F,"data-grid":A[r.level.type],"data-s":y[i],"data-r":b?"t":"f",onContextMenu:h?void 0:mt,children:Object(Ee.jsxs)("g",{transform:P,children:[Object(Ee.jsx)("rect",{x:"0",y:"0",width:"100%",height:"100%"}),Object(K.a)(r.cells).map((function e(t,c){var u="number"===typeof c?p(m,c):c,s=u.row,l=u.col,d=l*Et+(1===(1&s)?I:0),f=s*Et*w,b=[];j===x.TOROIDAL&&(0===l?b.push(e(t,{row:s,col:m})):1===l?b.push(e(t,{row:s,col:m+1})):l===m-1?b.push(e(t,{row:s,col:-1})):l===m-2&&b.push(e(t,{row:s,col:-2})),0===s?b.push(e(t,{col:l,row:O})):1===s?b.push(e(t,{col:l,row:O+1})):s===O-1?b.push(e(t,{col:l,row:-1})):s===O-2&&b.push(e(t,{col:l,row:-2})));var E=k(t),v=!h&&(i===y.PLAYING||i===y.NOT_INITIALIZED)&&E!==T.EXPLODED,A=Object(Ee.jsx)(Dt,{coordinate:N(m,{row:(s+O)%O,col:(l+m)%m}),gridType:r.level.type,dispatch:v?n:void 0,content:lt(t,i,o),cell:t,done:h}),D="".concat(d,",").concat(f);return 0===b.length?Object(Ee.jsx)("svg",{x:d,y:f,width:Et,height:Et,children:A},D):Object(Ee.jsxs)(a.Fragment,{children:[[].concat(b),Object(Ee.jsx)("svg",{x:d,y:f,width:Et,height:Et,children:A})]},D)}))]})})})),Nt=a.memo(pt,g.isEqual);function gt(e){return function(e){return null!=Ge[e]}(e.type)}function It(e){return"POKE"===e.type||"FLAG"===e.type}!function(e){e[e.SELECT_LEVEL=0]="SELECT_LEVEL",e[e.SETTINGS=1]="SETTINGS"}(ft||(ft={}));var xt,yt,wt,Ct=function(){window.navigator.vibrate(Object(K.a)(new Array(6)).map((function(e,t){return 0===(1&t)?300:100})))},Lt=function(e,t){if("PAUSE"===t.type&&e.game.board.state===y.PAUSED)return e;var n=function(e){return"PAUSE"===e.type||"UNPAUSE"===e.type}(t);if(n&&![y.PAUSED,y.PLAYING].includes(e.game.board.state))return e;var r=e.game.nextState(Ge[t.type],[It(t)?t.coordinate:-1,e.game.board],e.boardVersion),a=n;switch(e.game.board.state){case y.NOT_INITIALIZED:case y.INITIALIZED:a="POKE"===t.type||"FLAG"===t.type}return Object(l.a)(e,(function(t){if(t.boardVersion=r.version,a){var n=Object(K.a)(e.timingEvents);t.timingEvents=n,t.elapsedTime=function(){var e=n.length;if(0===e)return 0;r.state===y.PLAYING&&1!==(1&e)&&console.error("Unexpected array length");var t=function(e){var t=Object(K.a)(e);return 1===(1&t.length)&&t.pop(),Object(g.chunk)(t.map((function(e,t,n){return e-n[0]})),2).map((function(e){var t=Object(i.a)(e,2),n=t[0],r=t[1];return null!=r?r-n:r})).reduce((function(e,t){return e+t}),0)}(n);if(r.state===y.PLAYING){var a=n[e-1];return t+Date.now()-a}return t},t.timingEvents.push(Date.now())}t.game.board=r,e.game.board.state!==r.state&&console.debug("State changed",{old:y[e.game.board.state],new:y[t.game.board.state]})}))},St=(xt=2,yt=function(e,t){if("POKE"===t.type||"FLAG"===t.type?console.debug(Object(s.a)(Object(s.a)({},t),p(e.game.board.level.cols,t.coordinate))):console.debug(t),gt(t))return Lt(e,t);var n=e.modalStack.length;switch(t.type){case"setLevel":var r=Ve(null!=t.level?t.level:e.game.board.level,Ct);return Object(l.a)(e,(function(e){e.timingEvents=[],e.elapsedTime=E,e.game=r,e.modalStack=[]}));case"showModal":var a=e;return e.game.board.state===y.PLAYING&&(a=Lt(a,{type:"PAUSE"})),Object(l.a)(a,(function(e){e.modalStack.push(t.modal),e.showMenu=!1}));case"closeModal":return 0===n?(console.warn("Modal stack is empty"),e):Object(l.a)(e,(function(e){e.modalStack.pop()}));case"fitWindow":return Object(l.a)(e,(function(e){e.maxBoardDimensions=function(e){if(null==e.current)return{maxHeight:"revert",maxWidth:"revert"};var t=e.current.getBoundingClientRect().top;return{maxWidth:"100vw",maxHeight:"calc(100vh - ".concat(14+t+5,"px)")}}(t.ref)}));case"showMenu":case"hideMenu":case"toggleMenu":return function(e,t){var n=e.showMenu;switch(t.type){case"hideMenu":case"showMenu":n=!1;break;case"toggleMenu":n=!n}return n&&e.game.board.state===y.PLAYING&&(e=Lt(e,{type:"PAUSE"})),Object(l.a)(e,(function(e){e.showMenu=n}))}(e,t);case"requestFullscreen":return null==document.fullscreenElement&&document.documentElement.requestFullscreen().catch(),e;case"exitFullscreen":return null!=document.fullscreenElement&&document.exitFullscreen().catch(),e}v(t)},function(e,t){var n=yt(e,t);return n.game.board.state===y.GAME_OVER&&xt>=n.game.board.cellStates[T.EXPLODED]?Object(l.a)(n,(function(e){e.game.board.state=y.PLAYING})):n}),Rt=A.HEX,Tt=x.LIMITED,Mt={BEGINNER:{rows:6,cols:10,mines:10,type:Rt,topology:Tt},INTERMEDIATE:{rows:16,cols:16,mines:40,type:Rt,topology:Tt},EXPERT:{mines:99,rows:16,cols:30,type:Rt,topology:Tt}};h.HANGZHOU_NUMERAL;try{null!=(wt=je("object","level"))&&Xe(wt)}catch(En){}null==wt&&(wt=Mt.BEGINNER);var Ft={game:Object(s.a)({},Ve(wt,Ct)),loading:!1,maxBoardDimensions:{maxHeight:"revert",maxWidth:"revert"},modalStack:[],timingEvents:[],elapsedTime:E,showMenu:!1,lives:2,rotated:!1,boardVersion:0},Pt=c.a.createContext({state:Ft,dispatch:I.a.noop,containerRef:c.a.createRef()}),Ut=function(e){return Gt(document.body,e.classNames)},Gt=function(e,t){Object(a.useEffect)((function(){var n;if(null!=e&&null!=t)return console.debug("useDomTokenList.useEffect"),(n=e.classList).add.apply(n,Object(K.a)(t)),function(){var n;return(n=e.classList).remove.apply(n,Object(K.a)(t))}}),[e,t])};var _t=function(e,t,n){Object(a.useEffect)((function(){if(t){var r=setInterval(n,e);return console.debug("Create ticker",{id:r,timeout:e}),function(){console.debug("Cleanup ticker",{id:r}),clearInterval(r)}}}),[n,t,e])},kt=(n(41),function(e){var t=e.n,n=e.className,r=e.fractionDigits,a=e.asTime,o={minimumFractionDigits:r,maximumFractionDigits:r},u=c.a.useContext(Ie).numeralSystem,i=!0===a?b:j;return Object(Ee.jsx)("span",{className:null!==n&&void 0!==n?n:"FormatNumber","data-numeralsystem":h[u],title:t.toString(),"aria-label":t.toString(),children:i(u,t,o)})}),Bt=c.a.memo(kt),Ht=c.a.memo((function(e){var t=e.running,n=e.elapsedTime,r=e.numeralSystem,o=c.a.useState(n()),u=Object(i.a)(o,2),s=u[0],l=u[1];c.a.useEffect((function(){return l(n())}),[n]);var d=Object(a.useCallback)((function(){return l(n())}),[n]);return _t(1e3,t,d),Object(Ee.jsx)("span",{role:"timer","aria-live":t?"polite":"off",className:"Timer",title:s.toString(),children:Object(Ee.jsx)(Bt,{numeralSystem:r,n:Math.floor(s/1e3),asTime:!0})})})),Wt=n(28),Yt=n(11);var Xt=function(){var e=window.location.pathname.substring(0,window.location.pathname.lastIndexOf("/")+1).split(/[/]+/).join("/");return""===e?"/":e}(),Kt=c.a.memo((function(e){var t=e.to,n=void 0===t?"":t,r=e.children,a=Object(Wt.a)(e,["to","children"]);return"/"===n[0]&&(n=Xt+n),Object(Ee.jsx)(Yt.a,Object(s.a)(Object(s.a)({},a),{},{to:n,ref:void 0,children:r}))})),Vt=function(e,t){return"/"===e||""===e||null==e?e=Xt:"/"===e[0]&&(e=Xt+e),Object(Yt.c)(e,t)},zt=function(e,t){return window.addEventListener(e,t),function(){return window.removeEventListener(e,t)}};function Zt(e,t,n){switch(e){case y.PAUSED:return"\ud83e\uddd8";case y.COMPLETED:case y.PLAYING:return nt.repeat(t-n)+tt.repeat(n+1);case y.ERROR:return"\ud83e\udd14";case y.GAME_OVER:return"\ud83e\udd2c";case y.DEMO:case y.INITIALIZED:case y.NOT_INITIALIZED:return"\ud83c\udfaf"}v(e)}var Jt=function(){var e=c.a.useContext(Pt),t=e.state,n=e.dispatch,r=e.containerRef,a=t.elapsedTime,o=t.showMenu,u=t.lives,l=t.game.board,d=l.state,f=l.level.mines-l.cellStates[T.FLAGGED]-l.cellStates[T.EXPLODED],m=u-l.cellStates[T.EXPLODED],O=c.a.useContext(Ie).numeralSystem,j=c.a.useCallback((function(){switch(d){case y.PAUSED:n({type:"UNPAUSE"});break;case y.PLAYING:n({type:"PAUSE"});break;case y.COMPLETED:case y.GAME_OVER:case y.ERROR:n({type:"setLevel"})}}),[n,d]),b=c.a.useContext(ye),h=b.rotate,E=b.setRotate,v=c.a.useContext(pe),A=v.fitWindow,D=v.setFitWindow,p=c.a.useState(null!=document.fullscreenElement),N=Object(i.a)(p,2),g=N[0],I=N[1],x={className:"SvgMinesweeper__Controls__Item"};return c.a.useEffect((function(){return zt("fullscreenchange",(function(){return I(null!=document.fullscreenElement)}))}),[]),Object(Ee.jsxs)("div",{className:"SvgMinesweeper__Controls",children:[Object(Ee.jsx)("div",Object(s.a)(Object(s.a)({role:"button",onClick:j},x),{},{children:Object(Ee.jsx)(Ht,{numeralSystem:O,elapsedTime:a,running:d===y.PLAYING})})),Object(Ee.jsx)("div",Object(s.a)(Object(s.a)({},x),{},{role:"button",onClick:j,"aria-label":"Game state: ".concat(y[d]),children:Zt(d,u,m)})),Object(Ee.jsxs)("div",Object(s.a)(Object(s.a)({},x),{},{role:"button",children:[Object(Ee.jsx)(Bt,{numeralSystem:O,n:f}),Object(Ee.jsx)("span",{role:"img","aria-label":"Remaining mines",children:f>=0?rt():"\ud83d\udca9"})," "]})),Object(Ee.jsxs)("details",{open:o,children:[Object(Ee.jsx)("summary",Object(s.a)(Object(s.a)({onClick:function(e){e.preventDefault(),n({type:"toggleMenu"})}},x),{},{children:Object(Ee.jsx)("span",{role:"img","aria-label":"menu",children:"\ud83c\udf54"})})),Object(Ee.jsx)("nav",{children:Object(Ee.jsxs)("ul",{role:"menu",className:"Menu__List",children:[Object(Ee.jsx)("li",{role:"menuitem",children:Object(Ee.jsx)(Kt,{to:"level.html",children:"Select level"})}),Object(Ee.jsx)("li",{role:"menuitem",children:Object(Ee.jsx)(Kt,{to:"settings.html",children:"Settings"})}),Object(Ee.jsx)("li",{role:"menuitemcheckbox","aria-checked":A,children:Object(Ee.jsxs)("label",{children:[Object(Ee.jsx)("input",{onChange:c.a.useCallback((function(e){var t;D(null===(t=e.currentTarget)||void 0===t?void 0:t.checked),n({type:"fitWindow",ref:r})}),[r,n,D]),type:"checkbox",checked:A}),"Fit to window"]})}),Object(Ee.jsx)("li",{role:"menuitemcheckbox","aria-checked":h,children:Object(Ee.jsxs)("label",{children:[Object(Ee.jsx)("input",{onChange:c.a.useCallback((function(e){var t;return E(null===(t=e.currentTarget)||void 0===t?void 0:t.checked)}),[E]),type:"checkbox",checked:h}),"Rotate"]})}),Object(Ee.jsx)("li",{role:"menuitemcheckbox","aria-checked":g,children:Object(Ee.jsxs)("label",{children:[Object(Ee.jsx)("input",{onChange:function(){return n({type:g?"exitFullscreen":"requestFullscreen"})},type:"checkbox",checked:g}),"Fullscreen"]})})]})})]})]})},Qt=function(){var e=a.useContext(Pt),t=e.state,n=e.dispatch,r=e.containerRef,c=t.game.board,o=Ce().state,u=o.fitWindow,i=o.rotate,l=o.numeralSystem;a.useEffect((function(){n({type:"fitWindow",ref:r})}),[]),a.useEffect((function(){return zt("resize",(function(){return n({type:"fitWindow",ref:r})}))}),[r,n]),a.useEffect((function(){return zt("keyup",(function(e){"P"===e.key.toUpperCase()&&n({type:c.state===y.PLAYING?"PAUSE":"UNPAUSE"})}))}),[c.state,r,n]),a.useEffect((function(){return zt("visibilitychange",(function(){"visible"!==document.visibilityState&&c.state===y.PLAYING&&n({type:"PAUSE"})}))}),[c.state,n]),a.useEffect((function(){return zt("blur",(function(){n({type:"PAUSE"})}))}),[n]);var d=c.state===y.GAME_OVER||c.state===y.COMPLETED||c.state===y.ERROR,f=a.useCallback((function(e){mt(e),window.navigator.vibrate(300),n({type:"setLevel",level:c.level})}),[c.level,n]),m=u?Object(s.a)({},t.maxBoardDimensions):{};return Object(Ee.jsx)("div",{children:Object(Ee.jsxs)("div",{className:["SvgMinesweeper","SvgMinesweeper__Container"].join(" "),onPointerDown:function(e){(d||c.state===y.PAUSED)&&(e.preventDefault(),e.stopPropagation())},onContextMenu:d?f:mt,children:[Object(Ee.jsx)(Jt,{}),Object(Ee.jsx)(Qe,{children:Object(Ee.jsx)(Nt,{rotated:i,ref:r,dispatch:n,board:c,style:Object(s.a)({borderWidth:"".concat(7,"px")},m),numeralSystem:l})})]})})},qt=(n(47),n(48),fe()),$t=function(e){var t=e.theme,n=e.onChange;return Object(Ee.jsx)("div",{className:"ThemeChooser",children:Object(Ee.jsx)("select",{value:qt.indexOf(t),onChange:function(e){return n(qt[parseInt(e.currentTarget.value)])},children:qt.map((function(e,t){return Object(Ee.jsx)("option",{value:t,children:e.name},e.name)}))})})},en=c.a.memo($t),tn=function(e){var t=e.close,n=void 0===t?function(){return Vt("/")}:t,r=e.text,a=e.tooltip,c=e.aria;return Object(Ee.jsx)("button",Object(s.a)(Object(s.a)({},c),{},{title:a,className:"CloseButton",type:"button",onClick:n,children:r}))},nn=c.a.memo(tn),rn=a.memo((function(e){var t=e.selected,n=e.onChange;return Object(Ee.jsx)("ul",{className:"NumeralSystemChooser",children:Object.keys(h).filter((function(e){return isNaN(Number(e))})).map((function(e){var r=h[e];return Object(Ee.jsx)("li",{children:Object(Ee.jsxs)("label",{title:e,children:[Object(Ee.jsx)("input",{checked:t===r,type:"radio",name:"numeralsystem",value:r,onChange:function(e){e.currentTarget.checked&&n(r)}})," ",Object(K.a)(new Array(8)).map((function(e,t){return Object(Ee.jsx)("span",{className:"NumeralSystemChooser__digit",style:{color:"var(--cell-threats-".concat(t+1,"-color)")},children:dt(r,t+1)},t)}))]})},r)}))})})),an=function(){var e=Ce(),t=e.state,n=e.setState,r=a.useState(t.theme),c=Object(i.a)(r,2),o=c[0],u=c[1],l=a.useState(t.numeralSystem),d=Object(i.a)(l,2),f=d[0],m=d[1],O=a.useCallback((function(e){var t,n;null!=e&&((t=e.classList).remove.apply(t,Object(K.a)(e.classList.values())),(n=e.classList).add.apply(n,["Page"].concat(Object(K.a)(o.styles.map((function(e){return e.Theme}))))))}),[o.styles]);return Object(Ee.jsx)("div",{ref:O,children:Object(Ee.jsxs)("form",{className:"SettingsDialog",onSubmit:function(e){e.preventDefault(),n(Object(s.a)(Object(s.a)({},t),{},{theme:o,numeralSystem:f})),Vt("/")},onReset:function(e){e.preventDefault(),u(t.theme),m(t.numeralSystem)},children:[Object(Ee.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:[Object(Ee.jsxs)("fieldset",{children:[Object(Ee.jsx)("legend",{children:"Numeral system"}),Object(Ee.jsx)(rn,{selected:f,onChange:m})]}),Object(Ee.jsxs)("fieldset",{children:[Object(Ee.jsx)("legend",{children:"Theme"}),Object(Ee.jsx)(en,{theme:o,onChange:u})]}),Object(Ee.jsx)("section",{className:"SvgMinesweeper",children:Object(Ee.jsx)("div",{style:{width:"200px",height:"auto"},children:Object(Ee.jsx)(Nt,{board:ze().board,rotated:!1,numeralSystem:f})})})]}),Object(Ee.jsx)("div",{children:Object(Ee.jsx)("section",{children:Object(Ee.jsxs)("main",{children:[Object(Ee.jsx)("button",{type:"submit",children:"Apply changes"}),Object(Ee.jsx)("button",{type:"reset",children:"Reset"}),Object(Ee.jsx)(nn,{text:"Cancel"})]})})})]})})},cn=(n(49),Object.freeze([Object.freeze({rows:6,cols:10,mines:10,name:"Beginner"}),Object.freeze({rows:16,cols:16,mines:40,name:"Intermediate"}),Object.freeze({mines:99,rows:16,cols:30,name:"Expert"})])),on="Custom",un=function(e){var t=e.rows,n=e.cols,r=e.mines,a=e.numeralSystem,c=e.name;if(!0===e.asString){var o=[t,n,r].map((function(e){return j(a,e)})),u=Object(i.a)(o,3),s=u[0],l=u[1],d=u[2];return(null!=c?"".concat(c," : "):"")+"".concat(l," / ").concat(s," (").concat(d,")")}return Object(Ee.jsxs)(Ee.Fragment,{children:[null!=c?"".concat(c,": "):"",Object(Ee.jsx)(Bt,{numeralSystem:a,n:t})," / ",Object(Ee.jsx)(Bt,{numeralSystem:a,n:n})," (",Object(Ee.jsx)(Bt,{numeralSystem:a,n:r}),")"]})},sn=function(e){var t,n=e.onChange,r=Object(a.useContext)(Ie).numeralSystem,c=Object(a.useContext)(Pt).state.game.board.level,o=Object(a.useState)(c),u=Object(i.a)(o,2),l=u[0],d=u[1],f=l.rows,m=l.cols,O=l.mines,j=l.type,b=l.topology,h=We({rows:f,cols:m}),E=Ye({rows:f,cols:m});l.mines>h?d(Object(s.a)(Object(s.a)({},l),{},{mines:h})):l.mines<E&&d(Object(s.a)(Object(s.a)({},l),{},{mines:E}));var v=null===(t=cn.find((function(e){return n=e,(t=l).cols===n.cols&&t.rows===n.rows&&t.mines===n.mines;var t,n})))||void 0===t?void 0:t.name,D=Object(a.useCallback)((function(e){return d(Object(s.a)(Object(s.a)({},l),{},{type:A[e.currentTarget.value]}))}),[l]),p=Object(a.useCallback)((function(e){return d(Object(s.a)(Object(s.a)({},l),{},{topology:x[e.currentTarget.value]}))}),[l]);return Object(Ee.jsx)("div",{className:"LevelChooser",children:Object(Ee.jsxs)("form",{onSubmit:function(e){e.preventDefault(),n(l),Vt("/")},onReset:function(e){e.preventDefault(),d(c)},children:[Object(Ee.jsxs)("fieldset",{children:[Object(Ee.jsx)("legend",{children:"Select level"}),Object(Ee.jsxs)("select",{value:null!==v&&void 0!==v?v:on,onChange:function(e){d(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Beginner",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A.SQUARE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:x.LIMITED,r=cn.find((function(t){return t.name===e})),a=null!=r?r:cn[0];return Object.freeze(Object(s.a)(Object(s.a)({},a),{},{type:t,topology:n}))}(e.target.value,l.type,l.topology))},children:[Object(Ee.jsx)("option",{hidden:null!=v,value:on,children:un({name:on,cols:m,rows:f,mines:O,numeralSystem:r,asString:!0})}),Object(K.a)(cn.entries()).map((function(e){var t=Object(i.a)(e,2),n=t[0],a=t[1];return Object(Ee.jsx)("option",{value:a.name,children:un(Object(s.a)(Object(s.a)({},a),{},{numeralSystem:r,asString:!0}))},n)}))]})]}),Object(Ee.jsxs)("fieldset",{children:[Object(Ee.jsx)("legend",{children:"Custom level"}),Object(Ee.jsxs)("label",{children:["Rows: ",Object(Ee.jsx)(Bt,{numeralSystem:r,n:f}),Object(Ee.jsx)("input",{onChange:function(e){return d(Object(s.a)(Object(s.a)({},l),{},{rows:e.currentTarget.valueAsNumber}))},min:3,max:30,type:"range",value:f,name:"rows"})]}),Object(Ee.jsxs)("label",{children:["Columns:",Object(Ee.jsx)(Bt,{numeralSystem:r,n:m}),Object(Ee.jsx)("input",{onChange:function(e){return d(Object(s.a)(Object(s.a)({},l),{},{cols:e.currentTarget.valueAsNumber}))},min:3,max:30,type:"range",value:m,name:"cols"})]}),Object(Ee.jsxs)("label",{children:["Mines:",Object(Ee.jsx)(Bt,{numeralSystem:r,n:O})," (",Object(Ee.jsx)(Bt,{numeralSystem:r,n:100*O/(f*m),fractionDigits:1}),"\ufe6a)",Object(Ee.jsx)("input",{min:E,max:h,type:"range",value:O,name:"mines",onChange:function(e){return d(Object(s.a)(Object(s.a)({},l),{},{mines:e.currentTarget.valueAsNumber}))}})]}),Object(Ee.jsx)("button",{disabled:f===m,type:"button",onClick:function(){return d(Object(s.a)(Object(s.a)({},l),{},{rows:l.cols,cols:l.rows}))},children:"Swap rows and columns"})]}),Object(Ee.jsxs)("fieldset",{children:[Object(Ee.jsx)("legend",{children:"Grid type"}),Object.keys(A).filter((function(e){return isNaN(Number(e))})).map((function(e){var t=e===A[j],n=t?T.OPEN:T.NEW,r=t?"\u2713":"";return Object(Ee.jsxs)("label",{className:"RadioGroup__Option",children:[Object(Ee.jsx)("input",{className:"GridTypeRadio",onChange:D,checked:t,type:"radio",name:"type",value:e}),Object(Ee.jsxs)("div",{className:"SvgBoard","data-s":y[y.GAME_OVER],style:{width:"32px",height:"auto",display:"inline-block",verticalAlign:"middle"},children:[" ",Object(Ee.jsx)(Dt,{cell:X({state:n,threatCount:2,mine:void 0}),content:r,coordinate:0,gridType:A[e]})]})]},e)})),Object(Ee.jsx)("select",{onChange:p,value:x[b],children:Object.keys(x).filter((function(e){return!isNaN(Number(e))})).map((function(e){var t=x[e];return Object(Ee.jsx)("option",{value:t,children:t},t)}))})]}),Object(Ee.jsx)("button",{type:"submit",children:"OK"}),Object(Ee.jsx)("button",{type:"reset",children:"Reset"}),Object(Ee.jsx)(nn,{text:"Cancel"})]})})},ln=function(e){return Object(Ee.jsx)(Qt,{})},dn=function(e){return Object(Ee.jsx)(an,{})},fn=function(e){var t=e.dispatch;return Object(Ee.jsx)(sn,{onChange:function(e){t({type:"setLevel",level:e})}})},mn=function(){return[{y:0,x:1},{y:.5,x:D+1},{y:1.5,x:D+1},{y:2,x:1},{y:1.5,x:1-D},{y:.5,x:1-D}].map((function(e){var t=e.x,n=e.y;return"".concat(t*Et/2,",").concat(n*Et/2)})).join(" ")},On=function(){var e=2;return[[e,e],[e,Et-e],[Et-e,Et-e],[Et-e,e]].map((function(e){var t=Object(i.a)(e,2),n=t[0],r=t[1];return"".concat(n,",").concat(r)})).join(" ")},jn=Le((function(){var e=c.a.useReducer(St,Ft),t=Object(i.a)(e,2),n=t[0],r=t[1],a=c.a.useContext(ve).theme;return Ut(a),Object(Ee.jsxs)("div",{className:"App",children:[Object(Ee.jsx)("div",{children:Object(Ee.jsx)(Pt.Provider,{value:{state:n,dispatch:r,containerRef:c.a.createRef()},children:Object(Ee.jsxs)(Yt.b,{basepath:Xt,children:[Object(Ee.jsx)(ln,{default:!0}),Object(Ee.jsx)(dn,{path:"/settings.html"}),Object(Ee.jsx)(fn,{dispatch:r,path:"/level.html"})]})})}),Object(Ee.jsx)("svg",{style:{visibility:"hidden"},children:Object(Ee.jsxs)("defs",{children:[Object(Ee.jsx)("circle",{id:"circle",cx:16.5,cy:16.5,r:14.5}),Object(Ee.jsx)("polygon",{id:"".concat(A[A.HEX]),points:mn(),width:Et,height:Et,fillOpacity:1,strokeWidth:0}),Object(Ee.jsx)("polygon",{id:"".concat(A[A.SQUARE]),points:On(),width:Et,height:Et,fillOpacity:1,strokeWidth:0})]})})]})})),bn=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function hn(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}u.a.render(Object(Ee.jsx)(jn,{}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat(".","/service-worker.js");bn?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):hn(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):hn(t,e)}))}}()}],[[50,1,2]]]);
//# sourceMappingURL=main.46e6ef93.chunk.js.map