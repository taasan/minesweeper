(this.webpackJsonpminesweeper=this.webpackJsonpminesweeper||[]).push([[0],[,,,,,,,,,,,,,function(e,t,n){e.exports={Theme:"solarized_Theme__36Ttp"}},,,,,,function(e,t,n){e.exports={Theme:"theme_Theme__1KsyP"}},function(e,t,n){e.exports={Theme:"dark_Theme__n6cmj"}},function(e,t,n){e.exports={Theme:"light_Theme__3XUtO"}},function(e,t,n){e.exports={Theme:"auto_Theme__2DBna"}},,function(e,t,n){e.exports=n.p+"static/media/symbols.bdf98f4c.svg"},,,,function(e,t,n){e.exports=n(49)},,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},,function(e,t,n){},,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a,r=n(0),o=n.n(r),u=n(18),c=n.n(u),l=(n(33),n(1)),i=(n(34),n(2)),s=(n(35),n(4)),m=[[1e3,"\u216f","M"],[900,"\u216d\u216f","CM"],[500,"\u216e","D"],[400,"\u216d\u216e","CD"],[100,"\u216d","C"],[90,"\u2169\u216d","XC"],[50,"\u216c","L"],[40,"\u2169\u216c","XL"],[12,"\u216b","XII"],[11,"\u216a","XI"],[10,"\u2169","X"],[9,"\u2168","IX"],[8,"\u2167","VIII"],[7,"\u2166","VII"],[6,"\u2165","VI"],[5,"\u2164","V"],[4,"\u2163","IV"],[3,"\u2162","III"],[2,"\u2161","II"],[1,"\u2160","I"]],E=function(e,t){if(0===e||e>4e3)return e.toString();var n=[e<0?"\u2212":""];return e=Math.abs(e),m.forEach((function(a){for(var r=Object(l.a)(a,3),o=r[0],u=r[1],c=r[2];e>=o&&e>0&&!(12===o&&e>12||11===o&&e>11);)n.push(t?u:c),e-=o})),n.join("")};!function(e){e[e.ascii=48]="ascii",e[e.DOUBLE_CIRCLED=9460]="DOUBLE_CIRCLED",e[e.ROMAN_NUMERAL=8543]="ROMAN_NUMERAL",e[e.SMALL_ROMAN_NUMERAL=8559]="SMALL_ROMAN_NUMERAL",e[e.HANGZHOU_NUMERAL=12320]="HANGZHOU_NUMERAL",e[e.COUNTING_ROD_UNIT=119647]="COUNTING_ROD_UNIT",e[e.ARABIC_INDIC=1632]="ARABIC_INDIC",e[e.EXTENDED_ARABIC_INDIC=1776]="EXTENDED_ARABIC_INDIC",e[e.NKO=1984]="NKO",e[e.DEVANAGARI=2406]="DEVANAGARI",e[e.BENGALI=2534]="BENGALI",e[e.GURMUKHI=2662]="GURMUKHI",e[e.GUJARATI=2790]="GUJARATI",e[e.ORIYA=2918]="ORIYA",e[e.TAMIL=3046]="TAMIL",e[e.TELUGU=3174]="TELUGU",e[e.KANNADA=3302]="KANNADA",e[e.MALAYALAM=3430]="MALAYALAM",e[e.SINHALA_LITH=3558]="SINHALA_LITH",e[e.SINHALA_ARCHAIC=70112]="SINHALA_ARCHAIC",e[e.THAI=3664]="THAI",e[e.LAO=3792]="LAO",e[e.TIBETAN=3872]="TIBETAN",e[e.MYANMAR=4160]="MYANMAR",e[e.MYANMAR_SHAN=4240]="MYANMAR_SHAN",e[e.ETHIOPIC=4968]="ETHIOPIC",e[e.KHMER=6112]="KHMER",e[e.LEPCHA=7232]="LEPCHA",e[e.VAI=42528]="VAI",e[e.MYANMAR_TAI_LAING=43504]="MYANMAR_TAI_LAING",e[e.COPTIC_EPACT=66272]="COPTIC_EPACT",e[e.OSMANYA=66720]="OSMANYA"}(a||(a={}));var f=Object.freeze({ROMAN_NUMERAL:"roman",SMALL_ROMAN_NUMERAL:"romanlow",ARABIC_INDIC:"arab",EXTENDED_ARABIC_INDIC:"arabext",NKO:"nkoo",DEVANAGARI:"deva",BENGALI:"beng",GURMUKHI:"guru",GUJARATI:"gujr",ORIYA:"orya",TAMIL:"tamldec",TELUGU:"telu",KANNADA:"knda",MALAYALAM:"mlym",SINHALA_LITH:"sinh",THAI:"thai",LAO:"laoo",TIBETAN:"tibt",MYANMAR:"mymr",MYANMAR_SHAN:"mymrshan",ETHIOPIC:"ethi",KHMER:"khmr",MONGOLIAN:"mong",LIMBU:"limb",NEW_TAI_LUE:"talu",TAI_THAM_HORA:"lana",TAI_THAM_THAM:"lanatham",BALINESE:"bail",SUNDANESE:"sund",LEPCHA:"lepc",OL_CHIKI:"olck",VAI:"vaii",SAURASHTRA:"saur",KAYAH_LI:"kali",JAVANESE:"java",MYANMAR_TAI_LAING:"mymrtlng",CHAM:"cham",MEETEI_MAYEK:"mtei",OSMANYA:"osma",HANIFI_ROHINGYA:"rohg",BRAHMI:"brah",SORA_SOMPENG:"sora",CHAKMA:"cakm",SHARADA:"shrd",KHUDAWADI:"sind",NEWA:"newa",TIRHUTA:"tirh",MODI:"modi",TAKRI:"takr",AHOM:"ahom",WARANG_CITI:"wara",BHAIKSUKI:"bhks",MASARAM_GONDI:"gonm",GUNJALA_GONDI:"gong",MRO:"mroo",PAHAWH_HMONG:"hmng",NYIAKENG_PUACHUE_HMONG:"hmnp",WANCHO:"wcho",ADLAM:"adlm"}),d=function(e){return e===a.ROMAN_NUMERAL||e===a.SMALL_ROMAN_NUMERAL},v=function(e,t,n){return Number.isInteger(t)&&d(e)?E(t,!1):t.toLocaleString(function(e){var t=f[a[e]];return null!=t?"en-u-nu-".concat(t):void 0}(e),n)},A=function(e,t,n){var r=new Date(0,0,0,0,0,t),o=r.getSeconds(),u=r.getMinutes(),c=r.getHours(),i=[o];return(u>0||c>0)&&(i.unshift(u),c>0&&i.unshift(c)),d(e)&&(e=a.ascii),i.map((function(t){return[t,v(e,t,n)]})).map((function(t){var a=Object(l.a)(t,2),r=a[0],o=a[1];return r<10?v(e,0,n)+o:o})).join(":")},D=a;var h=function(){return 0};function O(e){throw new Error("Unexpected value: "+e)}var p,b=Math.sqrt(3)/2,g=function(e,t){if("object"===typeof t)return t;var n=t%e;return{col:n,row:(t-n)/e}},N=function(e,t){return"number"===typeof t?t:t.col+e*t.row},I=n(3),y=n.n(I);!function(e){e[e.SQUARE=0]="SQUARE",e[e.HEX=1]="HEX"}(p||(p={}));var w;!function(e){e[e.LIMITED=0]="LIMITED",e[e.TOROIDAL=1]="TOROIDAL"}(w||(w={}));var C,L=function(e,t){return e<<16|t},S=y.a.memoize((function(e,t){var n=g(e,t);return(0===(1&n.row)?[[1,0],[1,-1],[0,-1],[-1,-1],[-1,0],[0,1]]:[[1,1],[1,0],[0,-1],[-1,0],[-1,1],[0,1]]).map((function(e){var t=Object(l.a)(e,2),a=t[0],r=t[1];return{row:a+n.row,col:r+n.col}})).flat(1)}),L),T=y.a.memoize((function(e,t){var n=g(e,t);return[-1,0,1].map((function(e){return[-1,0,1].map((function(t){return{row:t+n.row,col:e+n.col}}))})).flat(1)}),L),R=n(7),M=function e(t,n){Object(R.a)(this,e),this.cause=void 0,this.message=void 0,this[s.c]=!0,this.message=t,this.cause=Object.freeze(n)};!function(e){e[e.NOT_INITIALIZED=0]="NOT_INITIALIZED",e[e.INITIALIZED=1]="INITIALIZED",e[e.PLAYING=2]="PLAYING",e[e.PAUSED=3]="PAUSED",e[e.COMPLETED=4]="COMPLETED",e[e.GAME_OVER=5]="GAME_OVER",e[e.ERROR=6]="ERROR",e[e.DEMO=7]="DEMO"}(C||(C={}));var j,F=function(e,t){var n=e.level;return e.cells[N(n.cols,t)]};function P(e){return Number.isInteger(Number(e))&&e>=0&&e<=8}!function(e){e[e.NEW=0]="NEW",e[e.OPEN=1]="OPEN",e[e.FLAGGED=2]="FLAGGED",e[e.UNCERTAIN=3]="UNCERTAIN",e[e.EXPLODED=4]="EXPLODED"}(j||(j={}));var U,G=function(e,t,n){if(n<0||n>15)throw new RangeError("Invalid value: ".concat(n));return t&~(15<<e)|n<<e},_=function(e,t){return(t&15<<e)>>e},x=function(e,t){if(null==j[t])throw new RangeError("Unknown state ".concat(t));return G(8,e,t)},k=function(e){return _(8,e)},B=function(e,t){return G(4,e,t)},H=function(e){var t=_(4,e);return 0!==t?t:void 0},W=function(e,t){if(!P(t))throw new RangeError("Invalid threat count: ".concat(t));return G(0,e,t)},Y=function(e){var t=_(0,e);if(!P(t))throw new RangeError("Invalid threat count: ".concat(t));return t},X=function(e){var t,n;return W(B(x(0,e.state),null!==(t=e.mine)&&void 0!==t?t:0),null!==(n=e.threatCount)&&void 0!==n?n:0)},K=n(5),V=n(11),z=n(10),Z=n(12),J=n(6),Q=n(19),q=n.n(Q);!function(e){e[e.DARK=0]="DARK",e[e.LIGHT=1]="LIGHT",e[e.AUTO=2]="AUTO"}(U||(U={}));var $=function(e){return Object.freeze(Object(i.a)({},e,{classNames:Object.freeze(e.styles.map((function(e){return e.Theme})))}))},ee=$({name:"Simple",styles:[q.a]}),te=n(13),ne=n.n(te),ae=n(20),re=n.n(ae),oe=n(21),ue=n.n(oe),ce=n(22),le=n.n(ce),ie=$({name:"Solarized dark",styles:[ne.a,re.a],mode:U.DARK}),se=$({name:"Solarized light",styles:[ne.a,ue.a],mode:U.LIGHT}),me=$({name:"Solarized (auto)",styles:[ne.a,le.a],mode:U.AUTO}),Ee=me,fe=function(){return[ee,me,ie,se]};function de(e){if(!["string","number","boolean","object"].includes(e))throw new TypeError("Unable to save value of type '".concat(e))}function ve(e,t){var n="".concat("Minesweeper.settings",".").concat(t);try{de(e);var a=localStorage.getItem(n);switch(e){case"number":var r=Number(a);return isNaN(r)?void 0:r;case"string":return a;case"boolean":case"object":var o=null!=a?JSON.parse(a):void 0;return"boolean"===e?!0===o:"object"===typeof o?o:void 0;default:console.warn("Unhandled type ".concat(e))}}catch(u){try{localStorage.removeItem(n)}catch(c){}console.warn({err:u,type:e,key:t})}}function Ae(e,t,n){try{de(e),localStorage.setItem("".concat("Minesweeper.settings",".").concat(t),"object"===e?JSON.stringify(n):n)}catch(a){console.warn(a)}}var De=function(e,t){var n=typeof t,a=ve(n,e),r=o.a.useState(null!==a&&void 0!==a?a:t),u=Object(l.a)(r,2),c=u[0],i=u[1];return[c,o.a.useCallback((function(t){i(t),Ae(n,e,t)}),[e,n])]},he=Object(r.createContext)({theme:Ee,setTheme:y.a.noop}),Oe=new Map(fe().map((function(e){return[e.name,e]}))),pe=function(e){var t,n=De("theme",Ee.name),a=Object(l.a)(n,2),r=a[0],u=a[1],c=Oe.get(r);return(null==(t=c)||"string"!==typeof t.name||null!=t.mode&&null==U[t.mode]||!Array.isArray(t.styles)||null==t.styles.find((function(e){return"string"!==typeof e}))||null!=t.symbols&&"string"!==typeof t.symbols.flag)&&(null!=c&&console.warn("Invalid theme",{name:r,theme:c}),c=Ee),o.a.createElement(he.Provider,{value:{theme:c,setTheme:function(e){return u(e.name)}}},e.children)},be=Object(r.createContext)({fitWindow:!1,setFitWindow:y.a.noop}),ge=function(e){var t=De("fitWindow",!1),n=Object(l.a)(t,2),a=n[0],r=n[1];return o.a.createElement(be.Provider,{value:{fitWindow:a,setFitWindow:r}},e.children)},Ne=D.ascii,Ie=Object(r.createContext)({numeralSystem:Ne,setNumeralSystem:y.a.noop}),ye=function(e){var t,n=De("numeralSystem",Ne),r=Object(l.a)(n,2),u=r[0],c=r[1];return("number"!==typeof(t=u)||null==a[t])&&(u=Ne),o.a.createElement(Ie.Provider,{value:{numeralSystem:u,setNumeralSystem:c}},e.children)},we=Object(r.createContext)({rotate:!1,setRotate:y.a.noop}),Ce=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(n){return t.reduce((function(e,t){return o.a.createElement(t,null,e)}),o.a.createElement(e,n))}}}(ge,pe,ye,(function(e){var t=De("rotate",!1),n=Object(l.a)(t,2),a=n[0],r=n[1];return o.a.createElement(we.Provider,{value:{rotate:a,setRotate:r}},e.children)})),Le=function(){var e=o.a.useContext(he),t=e.theme,n=e.setTheme,a=o.a.useContext(be),r=a.fitWindow,u=a.setFitWindow,c=o.a.useContext(Ie),l=c.numeralSystem,i=c.setNumeralSystem,s=o.a.useContext(we),m=s.rotate,E=s.setRotate;return{state:{fitWindow:r,setFitWindow:u,theme:t,setTheme:n,numeralSystem:l,setNumeralSystem:i,rotate:m,setRotate:E},setState:function(e){var t=e.theme,a=e.fitWindow,r=e.numeralSystem,o=e.rotate;n(t),u(a),i(r),E(o)}}},Se=Ce,Te=function(e){return Object.freeze(Object(i.a)({cols:0,rows:0,mines:0,type:p.SQUARE,topology:w.LIMITED},e))},Re=function(e){var t;return Object(i.a)((t={},Object(J.a)(t,j.NEW,0),Object(J.a)(t,j.OPEN,0),Object(J.a)(t,j.FLAGGED,0),Object(J.a)(t,j.UNCERTAIN,0),Object(J.a)(t,j.EXPLODED,0),t),e)},Me=function(e){return Object(s.a)(e,(function(e){return Object(i.a)({cells:new Uint16Array,state:C.NOT_INITIALIZED,level:Te(),cellStates:Re(),error:null,version:0,onGameOver:y.a.noop},e)}))},je=function(e){var t=e.cols,n=e.rows;return new Uint16Array(n*t)};function Fe(e,t,n){for(var a=e.level,r=e.onGameOver,o=je(a),u=a.cols,c=a.rows,l=a.mines,i=(new Set).add(N(u,t)),s=0,m=u*c;i.size<=l;){if(s++>10*l)throw new Error("Infinite loop?");var E=Ue(m);i.has(E)||(i.add(E),o[E]=B(o[E],Ue(14)+1))}return Me({level:Te(a),cells:o.map((function(e,t){var n=function(e,t){if(void 0!==H(e.cells[t]))return;var n=0;if(xe(e.level,t,(function(t){var a=e.cells[t];void 0!==H(a)&&n++})),n<0||n>8)throw new Error("Unexpected threat number: ".concat(n));return n}({level:a,cells:o},t);return void 0!==n?W(e,n):e})),cellStates:Re(Object(J.a)({},j.NEW,l)),state:n,onGameOver:r})}function Pe(e,t){var n=Object(l.a)(t,2),a=n[0],r=n[1],o=F(e,a),u=Y(o),c=Y(r);if(e.state===C.PLAYING&&u!==c)throw new Error("Expected ".concat(c,", got ").concat(u));e.cells[N(e.level.cols,a)]=r}function Ue(e){return Math.floor(Math.random()*Math.floor(e))}var Ge,_e=function(e,t){var n=e.rows,a=e.cols,r=e.type,o=e.topology,u=function(e){switch(e){case p.SQUARE:return T;case p.HEX:return S}O(e)}(r)(a,N(a,t)),c=function(e,t){return-1===e?t-1:e===t?0:e};switch(o){case w.TOROIDAL:u=u.map((function(e){var t=e.row,r=e.col;return{row:c(t,n),col:c(r,a)}}));break;case w.LIMITED:u=u.filter((function(e){var t=e.row,r=e.col;return!(r>=a||r<0||t>=n||t<0)}));break;default:O(o)}return u.map((function(e){var t=e.row;return e.col+a*t})).filter((function(e){return e!==t}))};function xe(e,t){for(var n=arguments.length,a=new Array(n>2?n-2:0),r=2;r<n;r++)a[r-2]=arguments[r];0!==a.length&&_e(e,t).forEach((function(e){return a.forEach((function(t){return t(e)}))}))}!function(e){e[e.POKE=0]="POKE",e[e.FLAG=1]="FLAG",e[e.PAUSE=2]="PAUSE",e[e.UNPAUSE=3]="UNPAUSE"}(Ge||(Ge={}));function ke(e,t){var n=Object(l.a)(t,2),a=n[0],r=n[1];return r.state===C.NOT_INITIALIZED?r=ke(e,[a,Fe(r,a,C.PLAYING)]):e===Ge.PAUSE||e===Ge.UNPAUSE?[C.PAUSED,C.PLAYING].includes(r.state)?Object(s.a)(r,(function(t){t.state=e===Ge.PAUSE?C.PAUSED:C.PLAYING})):r:Object(s.a)(r,(function(t){switch(e){case Ge.POKE:Be(a,t);break;case Ge.FLAG:!function(e,t){var n=F(t,e);switch(t.state){case C.PLAYING:break;case C.INITIALIZED:case C.PAUSED:case C.GAME_OVER:case C.COMPLETED:case C.NOT_INITIALIZED:case C.ERROR:case C.DEMO:return;default:O(t.state)}var a=k(n),r=a;switch(a){case j.FLAGGED:r=j.UNCERTAIN;break;case j.UNCERTAIN:r=j.NEW;break;case j.NEW:r=j.FLAGGED;break;case j.EXPLODED:case j.OPEN:return;default:O(a)}Pe(t,[e,x(n,r)])}(a,t);break;default:O(e)}var n,o=(n=t.cells,Re(y.a.countBy(n,(function(e){return k(e)}))));if(t.cellStates=o,t.cellStates[j.EXPLODED]>r.cellStates[j.EXPLODED]){t.state=C.GAME_OVER;try{r.onGameOver()}catch(c){console.warn("Unhandled exception in onGameOver handler",c)}}else if(k(F(t,a))===j.OPEN){var u=t.level.mines+o[j.OPEN]===t.level.cols*t.level.rows;t.state=u?C.COMPLETED:t.state}}))}function Be(e,t){switch(t.state){case C.PLAYING:break;case C.INITIALIZED:case C.PAUSED:case C.GAME_OVER:case C.COMPLETED:case C.NOT_INITIALIZED:case C.ERROR:case C.DEMO:return;default:O(t.state)}var n=F(t,e),a=k(n);if(a!==j.FLAGGED)if(a!==j.OPEN){var r=a,o=H(n);switch(a){case j.NEW:case j.UNCERTAIN:r=void 0!==o?j.EXPLODED:j.OPEN;break;case j.EXPLODED:return;default:O(a)}if(Pe(t,[e,x(n,r)]),0===Y(n)&&r!==j.EXPLODED){var u=function(e){var t=k(e);return t===j.NEW||t===j.UNCERTAIN};!function e(n){var a=Object(l.a)(n,2),r=a[0],o=a[1];if(void 0!==H(o))throw new Error("Expected cell not to be mined");u(o)&&(Pe(t,[r,x(o,j.OPEN)]),0===Y(o)&&_e(t.level,r).forEach((function(n){var a=t.cells[n];u(a)&&e([n,a])})))}([e,n])}}else!function(e,t){var n=F(t,e),a=t.level,r=0;xe(a,e,(function(e){var n=F(t,e),a=k(n);a!==j.FLAGGED&&a!==j.EXPLODED||r++})),r<Y(n)||xe(a,e,(function(e){var n=F(t,e),a=k(n);a!==j.NEW&&a!==j.UNCERTAIN||Be(e,t)}))}(e,t)}var He=function(e){var t=e.rows,n=e.cols;return Math.floor(t*n*.5)},We=function(e){var t=e.rows,n=e.cols;return Math.ceil(t*n*.1)},Ye=function(e){var t,n=e.rows,a=e.cols,r=e.mines,o=e.topology,u=e.type,c=[];if(n<3?c.push({field:"rows",value:n,msg:"Too small"}):n>30&&c.push({field:"rows",value:n,msg:"Too large"}),a<3?c.push({field:"cols",value:a,msg:"Too small"}):n>30&&c.push({field:"cols",value:a,msg:"Too large"}),r<We({rows:n,cols:a})?c.push({field:"mines",value:r,msg:"Too small"}):r>He({rows:n,cols:a})&&c.push({field:"mines",value:r,msg:"Too large"}),("number"!==typeof(t=o)||null==w[t])&&c.push({field:"topology",value:o,msg:"Invalid"}),function(e){return"number"===typeof e&&null!=p[e]}(u)||c.push({field:"type",value:u,msg:"Invalid"}),c.length>0)throw new Xe("Invalid level",c)},Xe=function(e){function t(e,n){var a;return Object(R.a)(this,t),(a=Object(V.a)(this,Object(z.a)(t).call(this,e))).errors=void 0,a.errors=Object.freeze(n.map((function(e){return Object.freeze(e)}))),a}return Object(Z.a)(t,e),t}(M);function Ke(e,t){try{Ye(e),Ae("object","level",e);var n=je(e).map(h),a=function(e,t){var n=Object(l.a)(t,2),a=n[0],r=n[1];try{switch(r.state){case C.PAUSED:return function(e,t){if(e!==Ge.UNPAUSE)throw new Error("Illegal command: expected ".concat(Ge[Ge.UNPAUSE]));if(t.state!==C.PAUSED)throw new Error("Invalid state: expected ".concat(C.PAUSED));return Object(s.a)(t,(function(e){e.state=C.PLAYING}))}(e,r)}return r.state===C.ERROR?r:Object(s.a)(ke(e,[a,r]),(function(e){e.version++}))}catch(o){return console.error(o),Object(s.a)(r,(function(t){t.error=o instanceof M?o:new M("Command ".concat(Ge[e]," failed"),o),t.state=C.ERROR}))}};return{board:Me({level:Te(e),cells:n,onGameOver:t}),nextState:function(e,t,n){var r=Object(l.a)(t,2),o=r[0],u=r[1];return u.state!==C.NOT_INITIALIZED&&n!==u.version?Object(s.a)(u,(function(e){e.error=new M("Version mismatch"),e.state=C.ERROR})):a(e,[o,u])}}}catch(r){if(r instanceof Xe)return{board:Me({level:Te(e),cells:new Uint16Array,onGameOver:t,state:C.ERROR,error:r}),nextState:function(e,t){var n=Object(l.a)(t,2);n[0];return n[1]}};throw r}}var Ve=function(){var e=[].concat(Object(K.a)(Object(K.a)(new Array(8)).map((function(e,t){return{state:j.OPEN,threatCount:t+1}}))),[{state:j.NEW},{state:j.OPEN,threatCount:0},{state:j.FLAGGED,mine:1},{state:j.FLAGGED,threatCount:0},{state:j.UNCERTAIN,mine:1},{state:j.UNCERTAIN,threatCount:0},{state:j.EXPLODED,mine:2},{state:j.OPEN,mine:3}]).map(X);return{board:Me({cells:new Uint16Array(e),level:Te({cols:4,rows:Math.ceil(e.length/4),type:p.HEX}),state:C.DEMO}),nextState:function(){throw new Error}}};Object(s.b)();var ze,Ze=n(23),Je=function(e){function t(){var e,n;Object(R.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(V.a)(this,(e=Object(z.a)(t)).call.apply(e,[this].concat(r)))).state={error:null},n}return Object(Z.a)(t,e),Object(Ze.a)(t,[{key:"componentDidCatch",value:function(e,t){}},{key:"render",value:function(){return null!=this.state.error?o.a.createElement("div",null,o.a.createElement("h1",null,"Something went wrong :("),o.a.createElement("p",null,this.state.error)):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{error:e.message}}}]),t}(r.Component),Qe=(n(37),function(){var e=new Date;return 17===e.getDate()&&4===e.getMonth()?"\ud83c\uddf3\ud83c\uddf4":"\u2623\ufe0f"}),qe=(ze={"\ud83e\udd12":null,"\ud83d\ude37":null,"\ud83e\udd2e":null,"\ud83e\udd22":null,"\ud83e\udd21":null,"\ud83e\udddf":null,"\ud83e\udd25":null,"\ud83e\udd15":null,"\ud83e\udd27":null,"\ud83d\udc7b":null,"\ud83e\udd75":null,"\ud83e\udd76":null,"\ud83d\udc79":null,"\ud83d\udc7a":null,"\ud83e\udda0":null,"\0":null},Object(J.a)(ze,"\ud83c\uddf3\ud83c\uddf4",null),Object(J.a)(ze,"\u2623\ufe0f",null),Object(J.a)(ze,"\u2753",null),Object(J.a)(ze,"\ud83e\udd7a",null),Object(J.a)(ze,"\ud83d\udca9",null),Object(J.a)(ze,"\ud83e\udd70",null),Object(J.a)(ze,"\ud83d\udc80",null),ze),$e=Object.freeze(y.a.takeWhile(Object.keys(qe),(function(e){return"\0"!==e})));function et(e){return null!=e&&"object"===typeof e&&("string"===typeof(e=e).data&&e.data.startsWith("data:image/svg+xml;base64,"))}function tt(e){var t;return"object"===typeof e&&"string"===typeof(null===(t=e=e)||void 0===t?void 0:t.href)}var nt=n(24),at=n.n(nt);function rt(e){return"\ud83c\uddf3\ud83c\uddf4"===e?e:{key:e,href:"".concat(at.a,"#").concat(e),external:!0}}function ot(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:rt;if(t===C.PAUSED)return"\xa0";var r=k(e),o=H(e),u=Y(e);if(r===j.EXPLODED)return a("\ud83d\udc80");var c=void 0!==o,l=t===C.COMPLETED,i=t===C.GAME_OVER,s=t===C.DEMO,m=i||l||s,E=r===j.FLAGGED;if(!m&&E)return a(Qe());var f=m&&c&&E&&(l||i);if(l&&c&&r!==j.FLAGGED)return a("\ud83e\udd7a");if(f)return a("\ud83e\udd70");if((i||r===j.OPEN)&&void 0!==o)return a($e[o]);if(t===C.COMPLETED)return ot(x(e,j.OPEN),C.PLAYING,n,a);switch(r){case j.FLAGGED:return a(!s&&!i||c?Qe():"\ud83d\udca9");case j.UNCERTAIN:return a("\u2753");case j.OPEN:return P(u)?ut(n,u):"\xa0";default:return"\xa0"}}function ut(e,t){return String.fromCodePoint(e+t)}n(38);var ct,lt=function(e){return e.stopPropagation(),e.preventDefault(),!1},it=n(14),st=n.n(it),mt=n(25),Et=function(e,t){return Object(r.useCallback)((function(n){if(null!=e){var a=Object(mt.a)(st.a.mark((function t(){return st.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e(n));case 1:case"end":return t.stop()}}),t)})))();if(null!=t){var r=t.onfinally,o=t.onfulfilled,u=t.onrejected;a.then(o&&function(){return o(n)}).catch(u&&function(e){return u(n,e)}).finally(r&&function(){return r(n)})}}}),[t,e])},ft=o.a.memo((function(e){var t,n=Object(i.a)({},e,{content:void 0}),a=e.content;if(null!=a&&(null!=(t=a)&&"string"!==typeof t&&!P(t)&&(et(t)||tt(t)))){return tt(a)&&!a.external?o.a.createElement("image",{className:"ct",x:5.5,y:5.5,width:22,height:22,href:a.href}):et(a)?o.a.createElement("use",{href:"#".concat(a.key),className:"ct",x:5.5,y:5.5,width:22,height:22}):o.a.createElement("use",{href:"".concat(a.href),className:"ct",x:5.5,y:5.5,width:22,height:22})}return o.a.createElement("text",Object.assign({className:"ct",x:16.5,y:16.5,dominantBaseline:"central",textAnchor:"middle",fill:"white",fontSize:16.5},n),a)})),dt=Object(r.memo)((function(e){var t=e.cell,n=e.dispatch,a=e.coordinate,r=e.content,u=e.gridType,c=e.done,l=k(t),i=H(t),s=Y(t),m=Et(n,{onrejected:function(e,t){return console.error("rejected",{action:e,err:t})}}),E=/^(?:[0-9\xB2\xB3\xB9\xBC-\xBE\u0660-\u0669\u06F0-\u06F9\u07C0-\u07C9\u0966-\u096F\u09E6-\u09EF\u09F4-\u09F9\u0A66-\u0A6F\u0AE6-\u0AEF\u0B66-\u0B6F\u0B72-\u0B77\u0BE6-\u0BF2\u0C66-\u0C6F\u0C78-\u0C7E\u0CE6-\u0CEF\u0D58-\u0D5E\u0D66-\u0D78\u0DE6-\u0DEF\u0E50-\u0E59\u0ED0-\u0ED9\u0F20-\u0F33\u1040-\u1049\u1090-\u1099\u1369-\u137C\u16EE-\u16F0\u17E0-\u17E9\u17F0-\u17F9\u1810-\u1819\u1946-\u194F\u19D0-\u19DA\u1A80-\u1A89\u1A90-\u1A99\u1B50-\u1B59\u1BB0-\u1BB9\u1C40-\u1C49\u1C50-\u1C59\u2070\u2074-\u2079\u2080-\u2089\u2150-\u2182\u2185-\u2189\u2460-\u249B\u24EA-\u24FF\u2776-\u2793\u2CFD\u3007\u3021-\u3029\u3038-\u303A\u3192-\u3195\u3220-\u3229\u3248-\u324F\u3251-\u325F\u3280-\u3289\u32B1-\u32BF\uA620-\uA629\uA6E6-\uA6EF\uA830-\uA835\uA8D0-\uA8D9\uA900-\uA909\uA9D0-\uA9D9\uA9F0-\uA9F9\uAA50-\uAA59\uABF0-\uABF9\uFF10-\uFF19]|\uD800[\uDD07-\uDD33\uDD40-\uDD78\uDD8A\uDD8B\uDEE1-\uDEFB\uDF20-\uDF23\uDF41\uDF4A\uDFD1-\uDFD5]|\uD801[\uDCA0-\uDCA9]|\uD802[\uDC58-\uDC5F\uDC79-\uDC7F\uDCA7-\uDCAF\uDCFB-\uDCFF\uDD16-\uDD1B\uDDBC\uDDBD\uDDC0-\uDDCF\uDDD2-\uDDFF\uDE40-\uDE48\uDE7D\uDE7E\uDE9D-\uDE9F\uDEEB-\uDEEF\uDF58-\uDF5F\uDF78-\uDF7F\uDFA9-\uDFAF]|\uD803[\uDCFA-\uDCFF\uDD30-\uDD39\uDE60-\uDE7E\uDF1D-\uDF26\uDF51-\uDF54\uDFC5-\uDFCB]|\uD804[\uDC52-\uDC6F\uDCF0-\uDCF9\uDD36-\uDD3F\uDDD0-\uDDD9\uDDE1-\uDDF4\uDEF0-\uDEF9]|\uD805[\uDC50-\uDC59\uDCD0-\uDCD9\uDE50-\uDE59\uDEC0-\uDEC9\uDF30-\uDF3B]|\uD806[\uDCE0-\uDCF2\uDD50-\uDD59]|\uD807[\uDC50-\uDC6C\uDD50-\uDD59\uDDA0-\uDDA9\uDFC0-\uDFD4]|\uD809[\uDC00-\uDC6E]|\uD81A[\uDE60-\uDE69\uDF50-\uDF59\uDF5B-\uDF61]|\uD81B[\uDE80-\uDE96]|\uD834[\uDEE0-\uDEF3\uDF60-\uDF78]|\uD835[\uDFCE-\uDFFF]|\uD838[\uDD40-\uDD49\uDEF0-\uDEF9]|\uD83A[\uDCC7-\uDCCF\uDD50-\uDD59]|\uD83B[\uDC71-\uDCAB\uDCAD-\uDCAF\uDCB1-\uDCB4\uDD01-\uDD2D\uDD2F-\uDD3D]|\uD83C[\uDD00-\uDD0C]|\uD83E[\uDFF0-\uDFF9])$/.test(r.toString())?void 0:"img";return o.a.createElement("svg",{viewBox:"0 0 ".concat(33," ").concat(33),className:"c",onMouseDown:!0===c?void 0:function(e){null==m||l!==j.OPEN&&0!==e.button||m({type:"POKE",coordinate:a})},onContextMenu:!0===c?void 0:function(e){if(lt(e),null!=m)switch(l){case j.NEW:case j.FLAGGED:case j.UNCERTAIN:return window.navigator.vibrate(100),m({type:"FLAG",coordinate:a})}},"data-s":l,"data-t":0!==s&&void 0===i?s:void 0,"data-m":void 0!==i||void 0},function(){var e=o.a.createElement("use",{href:"#".concat(p[u]),className:"cb"}),t=o.a.createElement("use",{href:"#".concat(p[u]),className:"cc"});switch(l){case j.NEW:return c?o.a.createElement(o.a.Fragment,null,t,o.a.createElement(ft,{role:E,content:r})):t;case j.FLAGGED:case j.UNCERTAIN:return o.a.createElement(o.a.Fragment,null,!0===c&&void 0!==i?e:t,o.a.createElement(ft,{role:"img",content:r}));case j.OPEN:if(void 0===i&&0===s)return e;case j.EXPLODED:return o.a.createElement(o.a.Fragment,null,e,o.a.createElement(ft,{role:E,content:r}))}O(l)}())})),vt=r.forwardRef((function(e,t){var n=e.dispatch,a=e.board,o=e.style,u=e.numeralSystem,c=e.rotated,l=a.state;switch(a.state){case C.ERROR:var i,s=null!=a.error?a.error.message:"Unknown error";a.error instanceof Xe&&(i=r.createElement("pre",{style:{textAlign:"initial"}},JSON.stringify(a.error.errors,void 0,2)));var m=null!=a.error&&null!=a.error.cause&&a.error.cause.message?r.createElement("p",null,a.error.cause.message):void 0;return null!=a.error&&console.error(a.error),r.createElement("main",{className:"Error"},r.createElement("header",null,r.createElement("h1",null,"Error"),r.createElement("p",null,"Something went wrong")),r.createElement("p",null,s),i,r.createElement("section",null,r.createElement("h2",null,"Cause"),null!==m&&void 0!==m?m:"unknown"));case C.NOT_INITIALIZED:case C.COMPLETED:case C.GAME_OVER:case C.INITIALIZED:case C.PLAYING:case C.PAUSED:case C.DEMO:break;default:return O(a.state)}var E=a.level,f=E.cols,d=E.rows,v=E.topology,A=c&&d!==f,D=l===C.GAME_OVER||l===C.COMPLETED||l===C.DEMO||l===C.ERROR,h=D||l===C.PAUSED?"none":"revert",I=function(){var e=a.level.type;switch(e){case p.SQUARE:return{xOffset:0,yFactor:1,width:33*f,height:33*d};case p.HEX:return{xOffset:16.5,yFactor:b,width:33*f+16.5,height:33*((d-1)*b+1)}}O(e)}(),y=I.xOffset,L=I.yFactor,S=I.width,T=I.height,R=v===w.LIMITED?{x:0,y:0,width:S,height:T}:{x:-33,y:-41.25,width:S+66,height:T+82.5},M=A?{x:R.y,y:R.x,width:R.height,height:R.width}:R,F=["SvgBoard"];A&&F.push("SvgBoard__rotated");var P="".concat(M.x," ").concat(M.y," ").concat(M.width," ").concat(M.height),U=A?"translate(".concat(T," 0) rotate(90 0 0)"):void 0;return r.createElement("svg",{ref:t,style:o,preserveAspectRatio:"xMidYMid meet",className:F.join(" "),pointerEvents:h,viewBox:P,"data-grid":p[a.level.type],"data-s":C[l],"data-r":A?"t":"f",onContextMenu:D?void 0:lt},r.createElement("g",{transform:U},r.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%"}),Object(K.a)(a.cells).map((function e(t,o){var c="number"===typeof o?g(f,o):o,i=c.row,s=c.col,m=33*s+(1===(1&i)?y:0),E=33*i*L,A=[];v===w.TOROIDAL&&(0===s?A.push(e(t,{row:i,col:f})):1===s?A.push(e(t,{row:i,col:f+1})):s===f-1?A.push(e(t,{row:i,col:-1})):s===f-2&&A.push(e(t,{row:i,col:-2})),0===i?A.push(e(t,{col:s,row:d})):1===i?A.push(e(t,{col:s,row:d+1})):i===d-1?A.push(e(t,{col:s,row:-1})):i===d-2&&A.push(e(t,{col:s,row:-2})));var h=k(t),O=!D&&(l===C.PLAYING||l===C.NOT_INITIALIZED)&&h!==j.EXPLODED,p=r.createElement(dt,{coordinate:N(f,{row:(i+d)%d,col:(s+f)%f}),gridType:a.level.type,dispatch:O?n:void 0,content:ot(t,l,u),cell:t,done:D}),b="".concat(m,",").concat(E);return 0===A.length?r.createElement("svg",{key:b,x:m,y:E,width:33,height:33},p):r.createElement(r.Fragment,{key:b},[].concat(A),r.createElement("svg",{x:m,y:E,width:33,height:33},p))}))))})),At=r.memo(vt,I.isEqual);function Dt(e){return function(e){return null!=Ge[e]}(e.type)}function ht(e){return"POKE"===e.type||"FLAG"===e.type}!function(e){e[e.SELECT_LEVEL=0]="SELECT_LEVEL",e[e.SETTINGS=1]="SETTINGS"}(ct||(ct={}));var Ot,pt,bt,gt=function(){window.navigator.vibrate(Object(K.a)(new Array(6)).map((function(e,t){return 0===(1&t)?300:100})))},Nt=function(e,t){if("PAUSE"===t.type&&e.game.board.state===C.PAUSED)return e;var n=function(e){return"PAUSE"===e.type||"UNPAUSE"===e.type}(t);if(n&&![C.PAUSED,C.PLAYING].includes(e.game.board.state))return e;var a=e.game.nextState(Ge[t.type],[ht(t)?t.coordinate:-1,e.game.board],e.boardVersion),r=n;switch(e.game.board.state){case C.NOT_INITIALIZED:case C.INITIALIZED:r="POKE"===t.type||"FLAG"===t.type}return Object(s.a)(e,(function(t){if(t.boardVersion=a.version,r){var n=Object(K.a)(e.timingEvents);t.timingEvents=n,t.elapsedTime=function(){var e=n.length;if(0===e)return 0;a.state===C.PLAYING&&1!==(1&e)&&console.error("Unexpected array length");var t=function(e){var t=Object(K.a)(e);return 1===(1&t.length)&&t.pop(),Object(I.chunk)(t.map((function(e,t,n){return e-n[0]})),2).map((function(e){var t=Object(l.a)(e,2),n=t[0],a=t[1];return null!=a?a-n:a})).reduce((function(e,t){return e+t}),0)}(n);if(a.state===C.PLAYING){var r=n[e-1];return t+Date.now()-r}return t},t.timingEvents.push(Date.now())}t.game.board=a,e.game.board.state!==a.state&&console.debug("State changed",{old:C[e.game.board.state],new:C[t.game.board.state]})}))},It=(Ot=2,pt=function(e,t){if("POKE"===t.type||"FLAG"===t.type?console.debug(Object(i.a)({},t,{},g(e.game.board.level.cols,t.coordinate))):console.debug(t),Dt(t))return Nt(e,t);var n=e.modalStack.length;switch(t.type){case"setLevel":var a=Ke(null!=t.level?t.level:e.game.board.level,gt);return Object(s.a)(e,(function(e){e.timingEvents=[],e.elapsedTime=h,e.game=a,e.modalStack=[]}));case"showModal":var r=e;return e.game.board.state===C.PLAYING&&(r=Nt(r,{type:"PAUSE"})),Object(s.a)(r,(function(e){e.modalStack.push(t.modal),e.showMenu=!1}));case"closeModal":return 0===n?(console.warn("Modal stack is empty"),e):Object(s.a)(e,(function(e){e.modalStack.pop()}));case"fitWindow":return Object(s.a)(e,(function(t){t.maxBoardDimensions=function(e){if(null==e.current)return{maxHeight:"revert",maxWidth:"revert"};var t=e.current.getBoundingClientRect().top;return{maxWidth:"100vw",maxHeight:"calc(100vh - ".concat(14+t+5,"px)")}}(e.containerRef)}));case"showMenu":case"hideMenu":case"toggleMenu":return function(e,t){var n=e.showMenu;switch(t.type){case"hideMenu":case"showMenu":n=!1;break;case"toggleMenu":n=!n}return n&&e.game.board.state===C.PLAYING&&(e=Nt(e,{type:"PAUSE"})),Object(s.a)(e,(function(e){e.showMenu=n}))}(e,t);case"requestFullscreen":return document.fullscreen||document.documentElement.requestFullscreen().catch(),e;case"exitFullscreen":return document.fullscreen&&document.exitFullscreen().catch(),e}O(t)},function(e,t){var n=pt(e,t);return n.game.board.state===C.GAME_OVER&&Ot>=n.game.board.cellStates[j.EXPLODED]?Object(s.a)(n,(function(e){e.game.board.state=C.PLAYING})):n}),yt=p.HEX,wt=w.LIMITED,Ct={BEGINNER:{rows:6,cols:10,mines:10,type:yt,topology:wt},INTERMEDIATE:{rows:16,cols:16,mines:40,type:yt,topology:wt},EXPERT:{mines:99,rows:16,cols:30,type:yt,topology:wt}};D.HANGZHOU_NUMERAL;try{null!=(bt=ve("object","level"))&&Ye(bt)}catch(on){}null==bt&&(bt=Ct.BEGINNER);var Lt={game:Object(i.a)({},Ke(bt,gt)),loading:!1,maxBoardDimensions:{maxHeight:"revert",maxWidth:"revert"},modalStack:[],timingEvents:[],elapsedTime:h,showMenu:!1,lives:2,containerRef:o.a.createRef(),rotated:!1,boardVersion:0},St=o.a.createContext({state:Lt,dispatch:y.a.noop}),Tt=function(e){return Rt(document.body,e.classNames)},Rt=function(e,t){Object(r.useEffect)((function(){var n;if(null!=e&&null!=t)return console.debug("useDomTokenList.useEffect"),(n=e.classList).add.apply(n,Object(K.a)(t)),function(){var n;return(n=e.classList).remove.apply(n,Object(K.a)(t))}}),[e,t])};var Mt=function(e,t,n){Object(r.useEffect)((function(){if(t){var a=setInterval(n,e);return console.debug("Create ticker",{id:a,timeout:e}),function(){console.debug("Cleanup ticker",{id:a}),clearInterval(a)}}}),[n,t,e])},jt=(n(40),o.a.memo((function(e){var t=e.n,n=e.className,a=e.fractionDigits,r=e.asTime,u={minimumFractionDigits:a,maximumFractionDigits:a},c=o.a.useContext(Ie).numeralSystem,l=!0===r?A:v;return o.a.createElement("span",{className:null!==n&&void 0!==n?n:"FormatNumber","data-numeralsystem":D[c],title:t.toString(),"aria-label":t.toString()},l(c,t,u))}))),Ft=o.a.memo((function(e){var t=e.running,n=e.elapsedTime,a=e.numeralSystem,u=o.a.useState(n()),c=Object(l.a)(u,2),i=c[0],s=c[1];o.a.useEffect((function(){return s(n())}),[n]);var m=Object(r.useCallback)((function(){return s(n())}),[n]);return Mt(1e3,t,m),o.a.createElement("span",{role:"timer","aria-live":t?"polite":"off",className:"Timer",title:i.toString()},o.a.createElement(jt,{numeralSystem:a,n:Math.floor(i/1e3),asTime:!0}))})),Pt=n(27),Ut=n(9);var Gt=function(){var e=(null!=="/minesweeper"?"/minesweeper":"/").split(/[/]+/).join("/");return""===e?"/":e}(),_t=o.a.memo((function(e){var t=e.to,n=void 0===t?"":t,a=e.children,r=Object(Pt.a)(e,["to","children"]);return"/"===n[0]&&(n=Gt+n),o.a.createElement(Ut.a,Object.assign({},r,{to:n,ref:void 0}),a)})),xt=function(e,t){return"/"===e||""===e||null==e?e=Gt:"/"===e[0]&&(e=Gt+e),Object(Ut.c)(e,t)},kt=function(e,t){return window.addEventListener(e,t),function(){return window.removeEventListener(e,t)}};var Bt=function(){var e=o.a.useContext(St),t=e.state,n=e.dispatch,a=t.elapsedTime,r=t.showMenu,u=t.lives,c=t.game.board,i=c.state,s=c.level.mines-c.cellStates[j.FLAGGED]-c.cellStates[j.EXPLODED],m=u-c.cellStates[j.EXPLODED],E=o.a.useContext(Ie).numeralSystem,f=o.a.useCallback((function(){switch(i){case C.PAUSED:n({type:"UNPAUSE"});break;case C.PLAYING:n({type:"PAUSE"});break;case C.COMPLETED:case C.GAME_OVER:case C.ERROR:n({type:"setLevel"})}}),[n,i]),d=o.a.useContext(we),v=d.rotate,A=d.setRotate,D=o.a.useContext(be),h=D.fitWindow,p=D.setFitWindow,b=o.a.useState(document.fullscreen),g=Object(l.a)(b,2),N=g[0],I=g[1],y={className:"SvgMinesweeper__Controls__Item"};return o.a.useEffect((function(){return kt("fullscreenchange",(function(){return I(document.fullscreen)}))}),[]),o.a.createElement("div",{className:"SvgMinesweeper__Controls"},o.a.createElement("div",Object.assign({role:"button",onClick:f},y),o.a.createElement(Ft,{numeralSystem:E,elapsedTime:a,running:i===C.PLAYING})),o.a.createElement("div",Object.assign({},y,{role:"button",onClick:f,"aria-label":"Game state: ".concat(C[i])}),function(e,t,n){switch(e){case C.PAUSED:return"\ud83e\uddd8";case C.COMPLETED:case C.PLAYING:return"\ud83d\udc80".repeat(t-n)+"\ud83e\udd70".repeat(n+1);case C.ERROR:return"\ud83e\udd14";case C.GAME_OVER:return"\ud83e\udd2c";case C.DEMO:case C.INITIALIZED:case C.NOT_INITIALIZED:return"\ud83c\udfaf"}O(e)}(i,u,m)),o.a.createElement("div",Object.assign({},y,{role:"button"}),o.a.createElement(jt,{numeralSystem:E,n:s}),o.a.createElement("span",{role:"img","aria-label":"Remaining mines"},s>=0?Qe():"\ud83d\udca9")," "),o.a.createElement("details",{open:r},o.a.createElement("summary",Object.assign({onClick:function(e){e.preventDefault(),n({type:"toggleMenu"})}},y),o.a.createElement("span",{role:"img","aria-label":"menu"},"\ud83c\udf54")),o.a.createElement("nav",null,o.a.createElement("ul",{role:"menu",className:"Menu__List"},o.a.createElement("li",{role:"menuitem"},o.a.createElement(_t,{to:"level.html"},"Select level")),o.a.createElement("li",{role:"menuitem"},o.a.createElement(_t,{to:"settings.html"},"Settings")),o.a.createElement("li",{role:"menuitemcheckbox","aria-checked":h},o.a.createElement("label",null,o.a.createElement("input",{onChange:o.a.useCallback((function(e){var t;return p(null===(t=e.currentTarget)||void 0===t?void 0:t.checked)}),[p]),type:"checkbox",checked:h}),"Fit to window")),o.a.createElement("li",{role:"menuitemcheckbox","aria-checked":v},o.a.createElement("label",null,o.a.createElement("input",{onChange:o.a.useCallback((function(e){var t;return A(null===(t=e.currentTarget)||void 0===t?void 0:t.checked)}),[A]),type:"checkbox",checked:v}),"Rotate")),o.a.createElement("li",{role:"menuitemcheckbox","aria-checked":N},o.a.createElement("label",null,o.a.createElement("input",{onChange:function(){return n({type:N?"exitFullscreen":"requestFullscreen"})},type:"checkbox",checked:N}),"Fullscreen"))))))},Ht=function(){var e=r.useContext(St),t=e.state,n=e.dispatch,a=t.game,o=t.containerRef,u=a.board,c=Le().state,l=c.fitWindow,s=c.rotate,m=c.numeralSystem;r.useEffect((function(){n({type:"fitWindow"})}),[n]),r.useEffect((function(){return kt("keyup",(function(e){80===e.keyCode&&n({type:u.state===C.PLAYING?"PAUSE":"UNPAUSE"})}))}),[u.state,o,n]),r.useEffect((function(){return kt("visibilitychange",(function(){"visible"!==document.visibilityState&&u.state===C.PLAYING&&n({type:"PAUSE"})}))}),[u.state,n]),r.useEffect((function(){return kt("blur",(function(){n({type:"PAUSE"})}))}),[n]);var E=u.state===C.GAME_OVER||u.state===C.COMPLETED||u.state===C.ERROR,f=r.useCallback((function(e){lt(e),window.navigator.vibrate(300),n({type:"setLevel",level:u.level})}),[u.level,n]),d=l?Object(i.a)({},t.maxBoardDimensions):{};return r.createElement("div",null,r.createElement("div",{className:["SvgMinesweeper","SvgMinesweeper__Container"].join(" "),onPointerDown:function(e){(E||u.state===C.PAUSED)&&(e.preventDefault(),e.stopPropagation())},onContextMenu:E?f:lt},r.createElement(Bt,null),r.createElement(Je,null,r.createElement(At,{rotated:s,ref:t.containerRef,dispatch:n,board:u,style:Object(i.a)({borderWidth:"".concat(7,"px")},d),numeralSystem:m}))))},Wt=(n(46),n(47),fe()),Yt=o.a.memo((function(e){var t=e.theme,n=e.onChange;return o.a.createElement("div",{className:"ThemeChooser"},o.a.createElement("select",{value:Wt.indexOf(t),onChange:function(e){return n(Wt[parseInt(e.currentTarget.value)])}},Wt.map((function(e,t){return o.a.createElement("option",{key:e.name,value:t},e.name)}))))})),Xt=o.a.memo((function(e){var t=e.close,n=void 0===t?function(){return xt("/")}:t,a=e.text,r=e.tooltip,u=e.aria;return o.a.createElement("button",Object.assign({},u,{title:r,className:"CloseButton",type:"button",onClick:n}),a)})),Kt=r.memo((function(e){var t=e.selected,n=e.onChange;return r.createElement("ul",{className:"NumeralSystemChooser"},Object.keys(D).filter((function(e){return isNaN(Number(e))})).map((function(e){var a=D[e];return r.createElement("li",{key:a},r.createElement("label",{title:e},r.createElement("input",{checked:t===a,type:"radio",name:"numeralsystem",value:a,onChange:function(e){e.currentTarget.checked&&n(a)}})," ",Object(K.a)(new Array(8)).map((function(e,t){return r.createElement("span",{className:"NumeralSystemChooser__digit",key:t,style:{color:"var(--cell-threats-".concat(t+1,"-color)")}},ut(a,t+1))}))))})))})),Vt=function(){var e=Le(),t=e.state,n=e.setState,a=r.useState(t.theme),o=Object(l.a)(a,2),u=o[0],c=o[1],s=r.useState(t.numeralSystem),m=Object(l.a)(s,2),E=m[0],f=m[1],d=r.useCallback((function(e){var t,n;null!=e&&((t=e.classList).remove.apply(t,Object(K.a)(e.classList.values())),(n=e.classList).add.apply(n,["Page"].concat(Object(K.a)(u.styles.map((function(e){return e.Theme}))))))}),[u.styles]);return r.createElement("div",{ref:d},r.createElement("form",{className:"SettingsDialog",onSubmit:function(e){e.preventDefault(),n(Object(i.a)({},t,{theme:u,numeralSystem:E})),xt("/")},onReset:function(e){e.preventDefault(),c(t.theme),f(t.numeralSystem)}},r.createElement("div",{style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap"}},r.createElement("fieldset",null,r.createElement("legend",null,"Numeral system"),r.createElement(Kt,{selected:E,onChange:f})),r.createElement("fieldset",null,r.createElement("legend",null,"Theme"),r.createElement(Yt,{theme:u,onChange:c})),r.createElement("section",{className:"SvgMinesweeper"},r.createElement("div",{style:{width:"200px",height:"auto"}},r.createElement(At,{board:Ve().board,rotated:!1,numeralSystem:E})))),r.createElement("div",null,r.createElement("section",null,r.createElement("main",null,r.createElement("button",{type:"submit"},"Apply changes"),r.createElement("button",{type:"reset"},"Reset"),r.createElement(Xt,{text:"Cancel"}))))))},zt=(n(48),Object.freeze([Object.freeze({rows:6,cols:10,mines:10,name:"Beginner"}),Object.freeze({rows:16,cols:16,mines:40,name:"Intermediate"}),Object.freeze({mines:99,rows:16,cols:30,name:"Expert"})])),Zt=function(e){var t=e.rows,n=e.cols,a=e.mines,r=e.numeralSystem,u=e.name;if(!0===e.asString){var c=[t,n,a].map((function(e){return v(r,e)})),i=Object(l.a)(c,3),s=i[0],m=i[1],E=i[2];return(null!=u?"".concat(u," : "):"")+"".concat(m," / ").concat(s," (").concat(E,")")}return o.a.createElement(o.a.Fragment,null,null!=u?"".concat(u,": "):"",o.a.createElement(jt,{numeralSystem:r,n:t})," / ",o.a.createElement(jt,{numeralSystem:r,n:n})," (",o.a.createElement(jt,{numeralSystem:r,n:a}),")")},Jt=function(e){var t,n=e.onChange,a=Object(r.useContext)(Ie).numeralSystem,u=Object(r.useContext)(St).state.game.board.level,c=Object(r.useState)(u),s=Object(l.a)(c,2),m=s[0],E=s[1],f=m.rows,d=m.cols,v=m.mines,A=m.type,D=m.topology,h=He({rows:f,cols:d}),O=We({rows:f,cols:d});m.mines>h?E(Object(i.a)({},m,{mines:h})):m.mines<O&&E(Object(i.a)({},m,{mines:O}));var b=null===(t=zt.find((function(e){return n=e,(t=m).cols===n.cols&&t.rows===n.rows&&t.mines===n.mines;var t,n})))||void 0===t?void 0:t.name,g=Object(r.useCallback)((function(e){return E(Object(i.a)({},m,{type:p[e.currentTarget.value]}))}),[m]),N=Object(r.useCallback)((function(e){return E(Object(i.a)({},m,{topology:w[e.currentTarget.value]}))}),[m]);return o.a.createElement("div",{className:"LevelChooser"},o.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n(m),xt("/")},onReset:function(e){e.preventDefault(),E(u)}},o.a.createElement("fieldset",null,o.a.createElement("legend",null,"Select level"),o.a.createElement("select",{value:null!==b&&void 0!==b?b:"Custom",onChange:function(e){E(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Beginner",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.SQUARE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w.LIMITED,a=zt.find((function(t){return t.name===e})),r=null!=a?a:zt[0];return Object.freeze(Object(i.a)({},r,{type:t,topology:n}))}(e.target.value,m.type,m.topology))}},o.a.createElement("option",{hidden:null!=b,value:"Custom"},Zt({name:"Custom",cols:d,rows:f,mines:v,numeralSystem:a,asString:!0})),Object(K.a)(zt.entries()).map((function(e){var t=Object(l.a)(e,2),n=t[0],r=t[1];return o.a.createElement("option",{value:r.name,key:n},Zt(Object(i.a)({},r,{numeralSystem:a,asString:!0})))})))),o.a.createElement("fieldset",null,o.a.createElement("legend",null,"Custom level"),o.a.createElement("label",null,"Rows: ",o.a.createElement(jt,{numeralSystem:a,n:f}),o.a.createElement("input",{onChange:function(e){return E(Object(i.a)({},m,{rows:e.currentTarget.valueAsNumber}))},min:3,max:30,type:"range",value:f,name:"rows"})),o.a.createElement("label",null,"Columns:",o.a.createElement(jt,{numeralSystem:a,n:d}),o.a.createElement("input",{onChange:function(e){return E(Object(i.a)({},m,{cols:e.currentTarget.valueAsNumber}))},min:3,max:30,type:"range",value:d,name:"cols"})),o.a.createElement("label",null,"Mines:",o.a.createElement(jt,{numeralSystem:a,n:v})," (",o.a.createElement(jt,{numeralSystem:a,n:100*v/(f*d),fractionDigits:1}),"\ufe6a)",o.a.createElement("input",{min:O,max:h,type:"range",value:v,name:"mines",onChange:function(e){return E(Object(i.a)({},m,{mines:e.currentTarget.valueAsNumber}))}})),o.a.createElement("button",{disabled:f===d,type:"button",onClick:function(){return E(Object(i.a)({},m,{rows:m.cols,cols:m.rows}))}},"Swap rows and columns")),o.a.createElement("fieldset",null,o.a.createElement("legend",null,"Grid type"),Object.keys(p).filter((function(e){return isNaN(Number(e))})).map((function(e){var t=e===p[A],n=t?j.OPEN:j.NEW,a=t?"\u2713":"";return o.a.createElement("label",{className:"RadioGroup__Option",key:e},o.a.createElement("input",{className:"GridTypeRadio",onChange:g,checked:t,type:"radio",name:"type",value:e}),o.a.createElement("div",{className:"SvgBoard","data-s":C[C.GAME_OVER],style:{width:"32px",height:"auto",display:"inline-block",verticalAlign:"middle"}}," ",o.a.createElement(dt,{cell:X({state:n,threatCount:2,mine:void 0}),content:a,coordinate:0,gridType:p[e]})))})),o.a.createElement("select",{onChange:N,value:w[D]},Object.keys(w).filter((function(e){return!isNaN(Number(e))})).map((function(e){var t=w[e];return o.a.createElement("option",{key:t,value:t},t)})))),o.a.createElement("button",{type:"submit"},"OK"),o.a.createElement("button",{type:"reset"},"Reset"),o.a.createElement(Xt,{text:"Cancel"})))},Qt=function(e){return o.a.createElement(Ht,null)},qt=function(e){return o.a.createElement(Vt,null)},$t=function(e){var t=e.dispatch;return o.a.createElement(Jt,{onChange:function(e){t({type:"setLevel",level:e})}})},en=function(){return[{y:0,x:1},{y:.5,x:b+1},{y:1.5,x:b+1},{y:2,x:1},{y:1.5,x:1-b},{y:.5,x:1-b}].map((function(e){var t=e.x,n=e.y;return"".concat(33*t/2,",").concat(33*n/2)})).join(" ")},tn=function(){var e=2;return[[e,e],[e,33-e],[33-e,33-e],[33-e,e]].map((function(e){var t=Object(l.a)(e,2),n=t[0],a=t[1];return"".concat(n,",").concat(a)})).join(" ")},nn=Se((function(){var e=o.a.useReducer(It,Lt),t=Object(l.a)(e,2),n=t[0],a=t[1],r=o.a.useContext(he).theme;return Tt(r),o.a.createElement("div",{className:"App"},o.a.createElement("div",null,o.a.createElement(St.Provider,{value:{state:n,dispatch:a}},o.a.createElement(Ut.b,{basepath:Gt},o.a.createElement(Qt,{default:!0}),o.a.createElement(qt,{path:"/settings.html"}),o.a.createElement($t,{dispatch:a,path:"/level.html"})))),o.a.createElement("svg",{style:{visibility:"hidden"}},o.a.createElement("defs",null,o.a.createElement("circle",{id:"circle",cx:16.5,cy:16.5,r:14.5}),o.a.createElement("polygon",{id:"".concat(p[p.HEX]),points:en(),width:33,height:33,fillOpacity:1,strokeWidth:0}),o.a.createElement("polygon",{id:"".concat(p[p.SQUARE]),points:tn(),width:33,height:33,fillOpacity:1,strokeWidth:0}))))})),an=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function rn(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(o.a.createElement(nn,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/minesweeper",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/minesweeper","/service-worker.js");an?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):rn(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):rn(t,e)}))}}()}],[[28,1,2]]]);
//# sourceMappingURL=main.d983c384.chunk.js.map